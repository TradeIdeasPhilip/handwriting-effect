(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function le(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ct={},Bt;function ue(){return Bt||(Bt=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.countMap=c.Random=c.phi=c.radiansPerDegree=c.degreesPerRadian=c.FULL_CIRCLE=c.FIGURE_SPACE=c.NON_BREAKING_SPACE=c.MIN_DATE=c.MAX_DATE=c.csvStringToArray=void 0,c.assertClass=e,c.assertNonNullable=n,c.sleep=s,c.testXml=r,c.parseXml=o,c.followPath=i,c.getAttribute=a,c.parseFloatX=u,c.parseIntX=l,c.parseTimeT=w,c.pickAny=d,c.pick=y,c.take=S,c.filterMap=h,c.makePromise=f,c.dateIsValid=p,c.angleBetween=m,c.positiveModulo=g,c.rotateArray=M,c.rectUnion=b,c.rectAddPoint=V,c.dateToFileName=_,c.lerp=I,c.assertFinite=C,c.shuffleArray=z,c.zip=T,c.count=F,c.initializedArray=O,c.sum=j,c.makeLinear=it,c.makeBoundedLinear=at,c.polarToRectangular=mt,c.permutations=_t,c.gcd=dt,c.lcm=It;function e(E,L,$="Assertion Failed."){const A=D=>{throw new Error(`${$}  Expected type:  ${L.name}.  Found type:  ${D}.`)};if(E===null)A("null");else if(typeof E!="object")A(typeof E);else if(!(E instanceof L))A(E.constructor.name);else return E;throw new Error("wtf")}function n(E){if(E==null)throw new Error("wtf");return E}function s(E){return new Promise(L=>{setTimeout(L,E)})}function r(E){const $=new DOMParser().parseFromString(E,"application/xml");for(const A of Array.from($.querySelectorAll("parsererror")))if(A instanceof HTMLElement)return{error:A};return{parsed:$}}function o(E){if(E!==void 0){const{parsed:L}=r(E);return L?.documentElement}}function i(E,...L){for(const $ of L){if(E===void 0)return;if(typeof $=="number")E=E.children[$];else{const A=E.getElementsByTagName($);if(A.length!=1)return;E=A[0]}}return E}function a(E,L,...$){if(L=i(L,...$),L!==void 0&&L.hasAttribute(E))return L.getAttribute(E)??void 0}function u(E){if(E==null)return;const L=+E;if(isFinite(L))return L}function l(E){const L=u(E);if(L!==void 0)return L>Number.MAX_SAFE_INTEGER||L<Number.MIN_SAFE_INTEGER||L!=Math.floor(L)?void 0:L}function w(E){if(typeof E=="string"&&(E=l(E)),E!=null&&!(E<=0))return new Date(E*1e3)}const x=E=>{const L=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,$=[[]];let A;for(;A=L.exec(E);)A[1].length&&A[1]!==","&&$.push([]),$[$.length-1].push(A[2]!==void 0?A[2].replace(/""/g,'"'):A[3]);return $};c.csvStringToArray=x;function d(E){const L=E.values().next();if(!L.done)return L.value}function y(E){if(E.length==0)throw new Error("wtf");return E[Math.random()*E.length|0]}function S(E){if(E.length<1)throw new Error("wtf");const L=Math.random()*E.length|0;return E.splice(L,1)[0]}function h(E,L){const $=[];return E.forEach((A,D)=>{const N=L(A,D);N!==void 0&&$.push(N)}),$}function f(){let E,L;return{promise:new Promise((A,D)=>{E=A,L=D}),resolve:E,reject:L}}c.MAX_DATE=new Date(864e13),c.MIN_DATE=new Date(-864e13);function p(E){return isFinite(E.getTime())}c.NON_BREAKING_SPACE=" ",c.FIGURE_SPACE=" ",c.FULL_CIRCLE=2*Math.PI,c.degreesPerRadian=360/c.FULL_CIRCLE,c.radiansPerDegree=c.FULL_CIRCLE/360,c.phi=(1+Math.sqrt(5))/2;function m(E,L){const $=g(E,c.FULL_CIRCLE);let D=g(L,c.FULL_CIRCLE)-$;const N=c.FULL_CIRCLE/2;if(D>N?D-=c.FULL_CIRCLE:D<-N&&(D+=c.FULL_CIRCLE),Math.abs(D)>N)throw new Error("wtf");return D}function g(E,L){const $=E%L;return $<0?$+Math.abs(L):$}function M(E,L){if((L|0)!=L)throw new Error(`invalid input: ${L}`);return L=g(L,E.length),L==0?E:[...E.slice(L),...E.slice(0,L)]}class v{constructor(){throw new Error("wtf")}static sfc32(L,$,A,D){function N(){L|=0,$|=0,A|=0,D|=0;let st=(L+$|0)+D|0;return D=D+1|0,L=$^$>>>9,$=A+(A<<3)|0,A=A<<21|A>>>11,A=A+st|0,(st>>>0)/4294967296}const J=N;return Object.defineProperty(J,"currentSeed",{get(){return JSON.stringify([L,$,A,D])}}),J}static#t=42;static seedIsValid(L){try{return this.create(L),!0}catch{return!1}}static create(L=this.newSeed()){console.info(L);const $=JSON.parse(L);if(!($ instanceof Array))throw new Error("invalid input");if($.length!=4)throw new Error("invalid input");const[A,D,N,J]=$;if(!(typeof A=="number"&&typeof D=="number"&&typeof N=="number"&&typeof J=="number"))throw new Error("invalid input");return this.sfc32(A,D,N,J)}static newSeed(){const L=[];return L.push(Date.now()|0),L.push(this.#t++|0),L.push(Math.random()*2**31|0),L.push(performance.now()*1e4|0),JSON.stringify(L)}static fromString(L){try{return this.create(L)}catch{return this.create(this.anyStringToSeed(L))}}static anyStringToSeed(L){function $(N,J){return(N<<J|N>>>32-J)>>>0}const A=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(L).forEach(N=>{A[0]^=N,A[0]=$(A[0],3),A[1]^=N,A[1]=$(A[1],5),A[2]^=N,A[2]=$(A[2],7),A[3]^=N,A[3]=$(A[3],11)}),A[0]^=$(A[1],7),A[1]^=$(A[2],11),A[2]^=$(A[3],13),A[3]^=$(A[0],17),JSON.stringify(A)}static test(){const A=[this.create()];for(;A.length<=10;){for(let N=0;N<20;N++){const J=A.map(st=>st());for(let st=1;st<J.length;st++)if(J[st]!==J[0]){debugger;throw new Error("wtf")}}const D=y(A).currentSeed;A.forEach(N=>{if(N.currentSeed!=D){debugger;throw new Error("wtf")}}),A.push(this.create(D))}}}c.Random=v;function b(E,L){const $=Math.min(E.x,L.x),A=Math.min(E.y,L.y),D=Math.max(E.x+E.width,L.x+L.width),N=Math.max(E.y+E.height,L.y+L.height),J=D-$,st=N-A;return{x:$,y:A,width:J,height:st}}function V(E,L,$){return b(E,{x:L,y:$,width:0,height:0})}function _(E){return isNaN(E.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${E.getFullYear().toString().padStart(4,"0")}⸱${(E.getMonth()+1).toString().padStart(2,"0")}⸱${E.getDate().toString().padStart(2,"0")} ${E.getHours().toString().padStart(2,"0")}⦂${E.getMinutes().toString().padStart(2,"0")}⦂${E.getSeconds().toString().padStart(2,"0")}`}function I(E,L,$){return E+(L-E)*$}function C(...E){E.forEach(L=>{if(!Number.isFinite(L))throw new Error("wtf")})}function z(E){for(let L=E.length-1;L>0;L--){const $=Math.floor(Math.random()*(L+1));[E[L],E[$]]=[E[$],E[L]]}return E}function*T(...E){const L=E.map($=>$[Symbol.iterator]());for(;;){const $=L.map(A=>A.next());if($.some(({done:A})=>A))break;yield $.map(({value:A})=>A)}}function*F(E=0,L=1/0,$=1){for(let A=E;A<L;A+=$)yield A}function O(E,L){const $=[];for(let A=0;A<E;A++)$.push(L(A));return $}c.countMap=O;function j(E){return E.reduce((L,$)=>L+$,0)}function it(E,L,$,A){const D=(A-L)/($-E);return function(N){return(N-E)*D+L}}function at(E,L,$,A){$<E&&([E,L,$,A]=[$,A,E,L]);const D=(A-L)/($-E);return function(N){return N<=E?L:N>=$?A:(N-E)*D+L}}function mt(E,L){return{x:Math.cos(L)*E,y:Math.sin(L)*E}}function*_t(E,L=[]){if(E.length==0)yield L;else for(let $=0;$<E.length;$++){const A=E[$],D=[...L,A],N=[...E.slice(0,$),...E.slice($+1)];yield*_t(N,D)}}function dt(E,L){return L?dt(L,E%L):E}function It(E,L){return E*L/dt(E,L)}})(Ct)),Ct}var R=ue(),G={},jt;function _e(){if(jt)return G;jt=1,Object.defineProperty(G,"__esModule",{value:!0}),G.AnimationLoop=void 0,G.getById=e,G.selectorQueryAll=n,G.selectorQuery=s,G.loadDateTimeLocal=r,G.getBlobFromCanvas=o,G.getAudioBalanceControl=i,G.getHashInfo=a,G.createElementFromHTML=u,G.download=l,G.getDataUrl=x;const c=ue();function e(d,y){const S=document.getElementById(d);if(!S)throw new Error("Could not find element with id "+d+".  Expected type:  "+y.name);if(S instanceof y)return S;throw new Error("Element with id "+d+" has type "+S.constructor.name+".  Expected type:  "+y.name)}function n(d,y,S=1,h=1/0,f=document){const p=[];if(f.querySelectorAll(d).forEach(m=>{p.push((0,c.assertClass)(m,y))}),p.length<S||p.length>h)throw new Error(`Expecting "${d}" to return [${S} - ${h}] instances of ${y.name}, found ${p.length}.`);return p}function s(d,y,S=document){return n(d,y,1,1,S)[0]}function r(d,y,S="milliseconds"){let h;switch(S){case"minutes":{h=y.getSeconds()*1e3+y.getMilliseconds();break}case"seconds":{h=y.getMilliseconds();break}case"milliseconds":{h=0;break}default:throw new Error("wtf")}d.valueAsNumber=+y-y.getTimezoneOffset()*6e4-h}function o(d){const{reject:y,resolve:S,promise:h}=(0,c.makePromise)();return d.toBlob(f=>{f?S(f):y(new Error("blob is null!"))}),h}function i(d){const y=new AudioContext,S=y.createMediaElementSource(d),h=new StereoPannerNode(y,{pan:0});return S.connect(h).connect(y.destination),f=>{h.pan.value=f}}function a(){const d=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(h=>{const f=h.split("=",2);if(f.length==2){const p=decodeURIComponent(f[0]),m=decodeURIComponent(f[1]);d.set(p,m)}}),d}function u(d,y){var S=document.createElement("div");return S.innerHTML=d.trim(),(0,c.assertClass)(S.firstChild,y,"createElementFromHTML:")}function l(d,y){var S=document.createElement("a");if(S.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(y)),S.setAttribute("download",d),document.createEvent){var h=document.createEvent("MouseEvents");h.initEvent("click",!0,!0),S.dispatchEvent(h)}else S.click()}class w{onWake;constructor(y){this.onWake=y,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#t=!1;cancel(){this.#t=!0}callback(y){this.#t||(requestAnimationFrame(this.callback),this.onWake(y))}}G.AnimationLoop=w;async function x(d){const y=document.createElement("img");y.src=d,await y.decode();const S=y.naturalHeight,h=y.naturalWidth;if(S==0||h==0)throw new Error("problem with image");const f=document.createElement("canvas");f.width=h,f.height=S;const p=f.getContext("2d");if(!p)throw new Error("wtf");return p.drawImage(y,0,0,f.width,f.height),f.toDataURL()}return G}var Y=_e(),X;(function(c){c.LOAD="LOAD",c.EXEC="EXEC",c.FFPROBE="FFPROBE",c.WRITE_FILE="WRITE_FILE",c.READ_FILE="READ_FILE",c.DELETE_FILE="DELETE_FILE",c.RENAME="RENAME",c.CREATE_DIR="CREATE_DIR",c.LIST_DIR="LIST_DIR",c.DELETE_DIR="DELETE_DIR",c.ERROR="ERROR",c.DOWNLOAD="DOWNLOAD",c.PROGRESS="PROGRESS",c.LOG="LOG",c.MOUNT="MOUNT",c.UNMOUNT="UNMOUNT"})(X||(X={}));const He=(()=>{let c=0;return()=>c++})(),be=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Qe=new Error("called FFmpeg.terminate()");class Ae{#t=null;#e={};#n={};#o=[];#r=[];loaded=!1;#i=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:s}})=>{switch(n){case X.LOAD:this.loaded=!0,this.#e[e](s);break;case X.MOUNT:case X.UNMOUNT:case X.EXEC:case X.FFPROBE:case X.WRITE_FILE:case X.READ_FILE:case X.DELETE_FILE:case X.RENAME:case X.CREATE_DIR:case X.LIST_DIR:case X.DELETE_DIR:this.#e[e](s);break;case X.LOG:this.#o.forEach(r=>r(s));break;case X.PROGRESS:this.#r.forEach(r=>r(s));break;case X.ERROR:this.#n[e](s);break}delete this.#e[e],delete this.#n[e]})};#s=({type:e,data:n},s=[],r)=>this.#t?new Promise((o,i)=>{const a=He();this.#t&&this.#t.postMessage({id:a,type:e,data:n},s),this.#e[a]=o,this.#n[a]=i,r?.addEventListener("abort",()=>{i(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(be);on(e,n){e==="log"?this.#o.push(n):e==="progress"&&this.#r.push(n)}off(e,n){e==="log"?this.#o=this.#o.filter(s=>s!==n):e==="progress"&&(this.#r=this.#r.filter(s=>s!==n))}load=({classWorkerURL:e,...n}={},{signal:s}={})=>(this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-DYSz7Krg.js",import.meta.url).href,import.meta.url),{type:"module"}),this.#i()),this.#s({type:X.LOAD,data:n},void 0,s));exec=(e,n=-1,{signal:s}={})=>this.#s({type:X.EXEC,data:{args:e,timeout:n}},void 0,s);ffprobe=(e,n=-1,{signal:s}={})=>this.#s({type:X.FFPROBE,data:{args:e,timeout:n}},void 0,s);terminate=()=>{const e=Object.keys(this.#n);for(const n of e)this.#n[n](Qe),delete this.#n[n],delete this.#e[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:s}={})=>{const r=[];return n instanceof Uint8Array&&r.push(n.buffer),this.#s({type:X.WRITE_FILE,data:{path:e,data:n}},r,s)};mount=(e,n,s)=>{const r=[];return this.#s({type:X.MOUNT,data:{fsType:e,options:n,mountPoint:s}},r)};unmount=e=>{const n=[];return this.#s({type:X.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:s}={})=>this.#s({type:X.READ_FILE,data:{path:e,encoding:n}},void 0,s);deleteFile=(e,{signal:n}={})=>this.#s({type:X.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:s}={})=>this.#s({type:X.RENAME,data:{oldPath:e,newPath:n}},void 0,s);createDir=(e,{signal:n}={})=>this.#s({type:X.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#s({type:X.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#s({type:X.DELETE_DIR,data:{path:e}},void 0,n)}var Yt;(function(c){c.MEMFS="MEMFS",c.NODEFS="NODEFS",c.NODERAWFS="NODERAWFS",c.IDBFS="IDBFS",c.WORKERFS="WORKERFS",c.PROXYFS="PROXYFS"})(Yt||(Yt={}));const Ve=""+new URL("ffmpeg-core-CI9Irx9p.js",import.meta.url).href,$e=""+new URL("ffmpeg-core-CgUfceKH.wasm",import.meta.url).href;class Gt{top;bottom;width;letters;spaceAfter;constructor(e,n){const s=n.getWord(e);let r=0;this.letters=s.map(a=>{const u={x:r,description:a};return r+=a.advance+n.kerning,u});const o=this.letters.at(-1);this.width=o?o.x+o.description.advance:0,this.top=n.top,this.bottom=n.bottom;let i=0;[...e].forEach(a=>{a==" "&&i++}),this.spaceAfter=i*n.spaceWidth+n.kerning}}class Re{}class Ie{constructor(e){this.font=e}#t=[];addWord(e,n=this.font){const s=new Gt(e,n);return this.#t.push(s),s}addText(e,n=this.font){const s=[];for(const r of e.matchAll(/(\n)|([^ \n]*(( +)|$|(?=\n)))/gms)){const o=r[0];if(o[0]==`
`)for(let i=0;i<o.length;i++)this.addLineBreak();else o!=""&&this.addWord(o,n)}return s}addLineBreak(){this.#t.push(new Re)}align(e=1/0,n="left"){const s=[[]];let r=0;for(this.#t.forEach(x=>{x instanceof Gt?(r>0&&r+x.width>e&&(r=0,s.push([])),r+=x.width+x.spaceAfter,s.at(-1).push(x)):(r=0,s.push([]))});s.length>0&&s.at(-1).length==0;)s.pop();let o=0;const i=new Array;s.forEach(x=>{const d=o,y=d-Math.min(...x.map(f=>f.top)),S=y+Math.max(...x.map(f=>f.bottom)),h=R.sum(x.map(f=>f.width+f.spaceAfter))-x.at(-1).spaceAfter;i.push({top:d,baseline:y,bottom:S,minWidth:h}),o=S});const a=new Array;e==1/0&&(e=Math.max(...i.map(({minWidth:x})=>x))),s.forEach((x,d)=>{const y=i[d],S=y.baseline;function h(){let g=(e-y.minWidth)/2;x.forEach(M=>{a.push({x:g,baseline:S,wordInfo:M}),g+=M.width+M.spaceAfter})}function f(){let g=0;x.forEach(M=>{a.push({x:g,baseline:S,wordInfo:M}),g+=M.width+M.spaceAfter})}function p(){let g=e-y.minWidth;x.forEach(M=>{a.push({x:g,baseline:S,wordInfo:M}),g+=M.width+M.spaceAfter})}function m(){const g=(e-y.minWidth)/(x.length-1);let M=0;x.forEach(v=>{a.push({x:M,baseline:S,wordInfo:v}),M+=v.width+v.spaceAfter+g})}switch(n){case"center":{h();break}case"left":{f();break}case"right":{p();break}case"justify":{d<s.length-1?m():f();break}default:throw new Error("wtf")}});function*u(x=0,d=0){for(const y of a)for(const S of y.wordInfo.letters){const h=x+y.x+S.x,f=d+y.baseline;yield{x:h,baseline:f,letter:S.description,translatedShape:S.description.shape.translate(h,f),word:y}}}function l(x,d=0,y=0){x.lineCap="round",x.lineJoin="round";for(const S of u(d,y)){const h=new Path2D(S.translatedShape.rawPath);x.stroke(h)}}function w(x=0,d=0){let y=0;const S=[...u(x,d)].flatMap(({translatedShape:p})=>p.splitOnMove()).map(p=>{const m=p.getLength(),g=y+m,v={path:new Path2D(p.rawPath),start:y,length:m,end:g};return y=g,v}),h=y;function f(p,m){m.lineCap="round",m.lineJoin="round";for(const g of S){if(p<=g.start)break;p>=g.end?m.setLineDash([]):m.setLineDash([p-g.start,h]),m.stroke(g.path)}}return{totalLength:h,drawTo:f}}return{width:e,words:a,allRowMetrics:i,getAllLetters:u,drawAll:l,drawPartial:w}}}function nt(c,e,n){return new DOMPoint(c,e).matrixTransform(n)}function Jt(c,e,n,s=.5,r=.5){const o=c.width/c.height,i=e.width/e.height;let a,u;switch(n){case"meet":case"srcRect fits completely into destRect":{o>i?(a=e.width/c.width,u=a):(u=e.height/c.height,a=u);break}case"slice":case"srcRect completely covers destRect":{o>i?(u=e.height/c.height,a=u):(a=e.width/c.width,u=a);break}default:throw new Error("wtf")}const l=-c.x*a+s*(e.width-c.width*a)+e.x,w=-c.y*u+r*(e.height-c.height*u)+e.y;return new DOMMatrix().translate(l,w).scale(a,u)}function Ce(){{const c={x:-1,y:-1,width:2,height:2},e={x:0,y:0,height:244,width:325},n=Jt(c,e,"meet");[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}].forEach(({x:r,y:o})=>{const i=nt(r,o,n);if(i.x<e.x||i.x>e.x+e.width||i.y<e.y||i.y>e.y+e.height)throw new Error(`Test 1 failed: Point (${i.x}, ${i.y}) is outside destination (${e.x}, ${e.y}, ${e.width}, ${e.height})`)})}{const c={x:-1,y:-1,width:2,height:2},e={x:0,y:0,height:325,width:244},n=Jt(c,e,"meet");[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}].forEach(({x:r,y:o})=>{const i=nt(r,o,n);if(i.x<e.x||i.x>e.x+e.width||i.y<e.y||i.y>e.y+e.height)throw new Error(`Test 2 failed: Point (${i.x}, ${i.y}) is outside destination (${e.x}, ${e.y}, ${e.width}, ${e.height})`)})}}Ce();var kt,Kt;function ke(){if(Kt)return kt;Kt=1,kt=n;var c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(o){var i=[];return o.replace(e,function(a,u,l){var w=u.toLowerCase();for(l=r(l),w=="m"&&l.length>2&&(i.push([u].concat(l.splice(0,2))),w="l",u=u=="m"?"l":"L");;){if(l.length==c[w])return l.unshift(u),i.push(l);if(l.length<c[w])throw new Error("malformed path data");i.push([u].concat(l.splice(0,c[w])))}}),i}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(o){var i=o.match(s);return i?i.map(Number):[]}return kt}var Te=ke();const ze=le(Te);var Tt,Zt;function Pe(){if(Zt)return Tt;Zt=1,Tt=c;function c(e){var n=0,s=0,r=0,o=0;return e.map(function(i){i=i.slice();var a=i[0],u=a.toUpperCase();if(a!=u)switch(i[0]=u,a){case"a":i[6]+=r,i[7]+=o;break;case"v":i[1]+=o;break;case"h":i[1]+=r;break;default:for(var l=1;l<i.length;)i[l++]+=r,i[l++]+=o}switch(u){case"Z":r=n,o=s;break;case"H":r=i[1];break;case"V":o=i[1];break;case"M":r=n=i[1],o=s=i[2];break;default:r=i[i.length-2],o=i[i.length-1]}return i})}return Tt}var Oe=Pe();const Fe=le(Oe);var Ne=(function(){function c(e,n){var s=[],r=!0,o=!1,i=void 0;try{for(var a=e[Symbol.iterator](),u;!(r=(u=a.next()).done)&&(s.push(u.value),!(n&&s.length===n));r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return s}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return c(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),Et=Math.PI*2,zt=function(e,n,s,r,o,i,a){var u=e.x,l=e.y;u*=n,l*=s;var w=r*u-o*l,x=o*u+r*l;return{x:w+i,y:x+a}},De=function(e,n){var s=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),r=Math.cos(e),o=Math.sin(e),i=Math.cos(e+n),a=Math.sin(e+n);return[{x:r-o*s,y:o+r*s},{x:i+a*s,y:a-i*s},{x:i,y:a}]},te=function(e,n,s,r){var o=e*r-n*s<0?-1:1,i=e*s+n*r;return i>1&&(i=1),i<-1&&(i=-1),o*Math.acos(i)},Ue=function(e,n,s,r,o,i,a,u,l,w,x,d){var y=Math.pow(o,2),S=Math.pow(i,2),h=Math.pow(x,2),f=Math.pow(d,2),p=y*S-y*f-S*h;p<0&&(p=0),p/=y*f+S*h,p=Math.sqrt(p)*(a===u?-1:1);var m=p*o/i*d,g=p*-i/o*x,M=w*m-l*g+(e+s)/2,v=l*m+w*g+(n+r)/2,b=(x-m)/o,V=(d-g)/i,_=(-x-m)/o,I=(-d-g)/i,C=te(1,0,b,V),z=te(b,V,_,I);return u===0&&z>0&&(z-=Et),u===1&&z<0&&(z+=Et),[M,v,C,z]},qe=function(e){var n=e.px,s=e.py,r=e.cx,o=e.cy,i=e.rx,a=e.ry,u=e.xAxisRotation,l=u===void 0?0:u,w=e.largeArcFlag,x=w===void 0?0:w,d=e.sweepFlag,y=d===void 0?0:d,S=[];if(i===0||a===0)return[];var h=Math.sin(l*Et/360),f=Math.cos(l*Et/360),p=f*(n-r)/2+h*(s-o)/2,m=-h*(n-r)/2+f*(s-o)/2;if(p===0&&m===0)return[];i=Math.abs(i),a=Math.abs(a);var g=Math.pow(p,2)/Math.pow(i,2)+Math.pow(m,2)/Math.pow(a,2);g>1&&(i*=Math.sqrt(g),a*=Math.sqrt(g));var M=Ue(n,s,r,o,i,a,x,y,h,f,p,m),v=Ne(M,4),b=v[0],V=v[1],_=v[2],I=v[3],C=Math.abs(I)/(Et/4);Math.abs(1-C)<1e-7&&(C=1);var z=Math.max(Math.ceil(C),1);I/=z;for(var T=0;T<z;T++)S.push(De(_,I)),_+=I;return S.map(function(F){var O=zt(F[0],i,a,f,h,b,V),j=O.x,it=O.y,at=zt(F[1],i,a,f,h,b,V),mt=at.x,_t=at.y,dt=zt(F[2],i,a,f,h,b,V),It=dt.x,E=dt.y;return{x1:j,y1:it,x2:mt,y2:_t,x:It,y:E}})};function We(c){for(var e,n=[],s=0,r=0,o=0,i=0,a=null,u=null,l=0,w=0,x=0,d=c.length;x<d;x++){var y=c[x],S=y[0];switch(S){case"M":o=y[1],i=y[2];break;case"A":var h=qe({px:l,py:w,cx:y[6],cy:y[7],rx:y[1],ry:y[2],xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5]});if(!h.length)continue;for(var f=0,p;f<h.length;f++)p=h[f],y=["C",p.x1,p.y1,p.x2,p.y2,p.x,p.y],f<h.length-1&&n.push(y);break;case"S":var m=l,g=w;(e=="C"||e=="S")&&(m+=m-s,g+=g-r),y=["C",m,g,y[1],y[2],y[3],y[4]];break;case"T":e=="Q"||e=="T"?(a=l*2-a,u=w*2-u):(a=l,u=w),y=ee(l,w,a,u,y[1],y[2]);break;case"Q":a=y[1],u=y[2],y=ee(l,w,y[1],y[2],y[3],y[4]);break;case"L":y=Ht(l,w,y[1],y[2]);break;case"H":y=Ht(l,w,y[1],w);break;case"V":y=Ht(l,w,l,y[1]);break;case"Z":y=Ht(l,w,o,i);break}e=S,l=y[y.length-2],w=y[y.length-1],y.length>4?(s=y[y.length-4],r=y[y.length-3]):(s=l,r=w),n.push(y)}return n}function Ht(c,e,n,s){return["C",c,e,n,s,n,s]}function ee(c,e,n,s,r,o){return["C",c/3+2/3*n,e/3+2/3*s,r/3+2/3*n,o/3+2/3*s,r,o]}const{abs:gt,cos:ot,sin:ft,acos:Xe,atan2:yt,sqrt:ct,pow:Z}=Math;function xt(c){return c<0?-Z(-c,1/3):Z(c,1/3)}const de=Math.PI,bt=2*de,ht=de/2,Be=1e-6,Pt=Number.MAX_SAFE_INTEGER||9007199254740991,Ot=Number.MIN_SAFE_INTEGER||-9007199254740991,je={x:0,y:0,z:0},Q={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(c,e){const n=e(c);let s=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(s+=n.z*n.z),ct(s)},compute:function(c,e,n){if(c===0)return e[0].t=0,e[0];const s=e.length-1;if(c===1)return e[s].t=1,e[s];const r=1-c;let o=e;if(s===0)return e[0].t=c,e[0];if(s===1){const a={x:r*o[0].x+c*o[1].x,y:r*o[0].y+c*o[1].y,t:c};return n&&(a.z=r*o[0].z+c*o[1].z),a}if(s<4){let a=r*r,u=c*c,l,w,x,d=0;s===2?(o=[o[0],o[1],o[2],je],l=a,w=r*c*2,x=u):s===3&&(l=a*r,w=a*c*3,x=r*u*3,d=c*u);const y={x:l*o[0].x+w*o[1].x+x*o[2].x+d*o[3].x,y:l*o[0].y+w*o[1].y+x*o[2].y+d*o[3].y,t:c};return n&&(y.z=l*o[0].z+w*o[1].z+x*o[2].z+d*o[3].z),y}const i=JSON.parse(JSON.stringify(e));for(;i.length>1;){for(let a=0;a<i.length-1;a++)i[a]={x:i[a].x+(i[a+1].x-i[a].x)*c,y:i[a].y+(i[a+1].y-i[a].y)*c},typeof i[a].z<"u"&&(i[a].z=i[a].z+(i[a+1].z-i[a].z)*c);i.splice(i.length-1,1)}return i[0].t=c,i[0]},computeWithRatios:function(c,e,n,s){const r=1-c,o=n,i=e;let a=o[0],u=o[1],l=o[2],w=o[3],x;if(a*=r,u*=c,i.length===2)return x=a+u,{x:(a*i[0].x+u*i[1].x)/x,y:(a*i[0].y+u*i[1].y)/x,z:s?(a*i[0].z+u*i[1].z)/x:!1,t:c};if(a*=r,u*=2*r,l*=c*c,i.length===3)return x=a+u+l,{x:(a*i[0].x+u*i[1].x+l*i[2].x)/x,y:(a*i[0].y+u*i[1].y+l*i[2].y)/x,z:s?(a*i[0].z+u*i[1].z+l*i[2].z)/x:!1,t:c};if(a*=r,u*=1.5*r,l*=3*r,w*=c*c*c,i.length===4)return x=a+u+l+w,{x:(a*i[0].x+u*i[1].x+l*i[2].x+w*i[3].x)/x,y:(a*i[0].y+u*i[1].y+l*i[2].y+w*i[3].y)/x,z:s?(a*i[0].z+u*i[1].z+l*i[2].z+w*i[3].z)/x:!1,t:c}},derive:function(c,e){const n=[];for(let s=c,r=s.length,o=r-1;r>1;r--,o--){const i=[];for(let a=0,u;a<o;a++)u={x:o*(s[a+1].x-s[a].x),y:o*(s[a+1].y-s[a].y)},e&&(u.z=o*(s[a+1].z-s[a].z)),i.push(u);n.push(i),s=i}return n},between:function(c,e,n){return e<=c&&c<=n||Q.approximately(c,e)||Q.approximately(c,n)},approximately:function(c,e,n){return gt(c-e)<=(n||Be)},length:function(c){const n=Q.Tvalues.length;let s=0;for(let r=0,o;r<n;r++)o=.5*Q.Tvalues[r]+.5,s+=Q.Cvalues[r]*Q.arcfn(o,c);return .5*s},map:function(c,e,n,s,r){const o=n-e,i=r-s,a=c-e,u=a/o;return s+i*u},lerp:function(c,e,n){const s={x:e.x+c*(n.x-e.x),y:e.y+c*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(s.z=e.z+c*(n.z-e.z)),s},pointToString:function(c){let e=c.x+"/"+c.y;return typeof c.z<"u"&&(e+="/"+c.z),e},pointsToString:function(c){return"["+c.map(Q.pointToString).join(", ")+"]"},copy:function(c){return JSON.parse(JSON.stringify(c))},angle:function(c,e,n){const s=e.x-c.x,r=e.y-c.y,o=n.x-c.x,i=n.y-c.y,a=s*i-r*o,u=s*o+r*i;return yt(a,u)},round:function(c,e){const n=""+c,s=n.indexOf(".");return parseFloat(n.substring(0,s+1+e))},dist:function(c,e){const n=c.x-e.x,s=c.y-e.y;return ct(n*n+s*s)},closest:function(c,e){let n=Z(2,63),s,r;return c.forEach(function(o,i){r=Q.dist(e,o),r<n&&(n=r,s=i)}),{mdist:n,mpos:s}},abcratio:function(c,e){if(e!==2&&e!==3)return!1;if(typeof c>"u")c=.5;else if(c===0||c===1)return c;const n=Z(c,e)+Z(1-c,e),s=n-1;return gt(s/n)},projectionratio:function(c,e){if(e!==2&&e!==3)return!1;if(typeof c>"u")c=.5;else if(c===0||c===1)return c;const n=Z(1-c,e),s=Z(c,e)+n;return n/s},lli8:function(c,e,n,s,r,o,i,a){const u=(c*s-e*n)*(r-i)-(c-n)*(r*a-o*i),l=(c*s-e*n)*(o-a)-(e-s)*(r*a-o*i),w=(c-n)*(o-a)-(e-s)*(r-i);return w==0?!1:{x:u/w,y:l/w}},lli4:function(c,e,n,s){const r=c.x,o=c.y,i=e.x,a=e.y,u=n.x,l=n.y,w=s.x,x=s.y;return Q.lli8(r,o,i,a,u,l,w,x)},lli:function(c,e){return Q.lli4(c,c.c,e,e.c)},makeline:function(c,e){return new B(c.x,c.y,(c.x+e.x)/2,(c.y+e.y)/2,e.x,e.y)},findbbox:function(c){let e=Pt,n=Pt,s=Ot,r=Ot;return c.forEach(function(o){const i=o.bbox();e>i.x.min&&(e=i.x.min),n>i.y.min&&(n=i.y.min),s<i.x.max&&(s=i.x.max),r<i.y.max&&(r=i.y.max)}),{x:{min:e,mid:(e+s)/2,max:s,size:s-e},y:{min:n,mid:(n+r)/2,max:r,size:r-n}}},shapeintersections:function(c,e,n,s,r){if(!Q.bboxoverlap(e,s))return[];const o=[],i=[c.startcap,c.forward,c.back,c.endcap],a=[n.startcap,n.forward,n.back,n.endcap];return i.forEach(function(u){u.virtual||a.forEach(function(l){if(l.virtual)return;const w=u.intersects(l,r);w.length>0&&(w.c1=u,w.c2=l,w.s1=c,w.s2=n,o.push(w))})}),o},makeshape:function(c,e,n){const s=e.points.length,r=c.points.length,o=Q.makeline(e.points[s-1],c.points[0]),i=Q.makeline(c.points[r-1],e.points[0]),a={startcap:o,forward:c,back:e,endcap:i,bbox:Q.findbbox([o,c,e,i])};return a.intersections=function(u){return Q.shapeintersections(a,a.bbox,u,u.bbox,n)},a},getminmax:function(c,e,n){if(!n)return{min:0,max:0};let s=Pt,r=Ot,o,i;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let a=0,u=n.length;a<u;a++)o=n[a],i=c.get(o),i[e]<s&&(s=i[e]),i[e]>r&&(r=i[e]);return{min:s,mid:(s+r)/2,max:r,size:r-s}},align:function(c,e){const n=e.p1.x,s=e.p1.y,r=-yt(e.p2.y-s,e.p2.x-n),o=function(i){return{x:(i.x-n)*ot(r)-(i.y-s)*ft(r),y:(i.x-n)*ft(r)+(i.y-s)*ot(r)}};return c.map(o)},roots:function(c,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=c.length-1,s=Q.align(c,e),r=function(V){return 0<=V&&V<=1};if(n===2){const V=s[0].y,_=s[1].y,I=s[2].y,C=V-2*_+I;if(C!==0){const z=-ct(_*_-V*I),T=-V+_,F=-(z+T)/C,O=-(-z+T)/C;return[F,O].filter(r)}else if(_!==I&&C===0)return[(2*_-I)/(2*_-2*I)].filter(r);return[]}const o=s[0].y,i=s[1].y,a=s[2].y,u=s[3].y;let l=-o+3*i-3*a+u,w=3*o-6*i+3*a,x=-3*o+3*i,d=o;if(Q.approximately(l,0)){if(Q.approximately(w,0))return Q.approximately(x,0)?[]:[-d/x].filter(r);const V=ct(x*x-4*w*d),_=2*w;return[(V-x)/_,(-x-V)/_].filter(r)}w/=l,x/=l,d/=l;const y=(3*x-w*w)/3,S=y/3,h=(2*w*w*w-9*w*x+27*d)/27,f=h/2,p=f*f+S*S*S;let m,g,M,v,b;if(p<0){const V=-y/3,_=V*V*V,I=ct(_),C=-h/(2*I),z=C<-1?-1:C>1?1:C,T=Xe(z),F=xt(I),O=2*F;return M=O*ot(T/3)-w/3,v=O*ot((T+bt)/3)-w/3,b=O*ot((T+2*bt)/3)-w/3,[M,v,b].filter(r)}else{if(p===0)return m=f<0?xt(-f):-xt(f),M=2*m-w/3,v=-m-w/3,[M,v].filter(r);{const V=ct(p);return m=xt(-f+V),g=xt(f+V),[m-g-w/3].filter(r)}}},droots:function(c){if(c.length===3){const e=c[0],n=c[1],s=c[2],r=e-2*n+s;if(r!==0){const o=-ct(n*n-e*s),i=-e+n,a=-(o+i)/r,u=-(-o+i)/r;return[a,u]}else if(n!==s&&r===0)return[(2*n-s)/(2*(n-s))];return[]}if(c.length===2){const e=c[0],n=c[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(c,e,n,s,r){let o,i,a,u,l=0,w=0;const x=Q.compute(c,e),d=Q.compute(c,n),y=x.x*x.x+x.y*x.y;if(s?(o=ct(Z(x.y*d.z-d.y*x.z,2)+Z(x.z*d.x-d.z*x.x,2)+Z(x.x*d.y-d.x*x.y,2)),i=Z(y+x.z*x.z,3/2)):(o=x.x*d.y-x.y*d.x,i=Z(y,3/2)),o===0||i===0)return{k:0,r:0};if(l=o/i,w=i/o,!r){const S=Q.curvature(c-.001,e,n,s,!0).k,h=Q.curvature(c+.001,e,n,s,!0).k;u=(h-l+(l-S))/2,a=(gt(h-l)+gt(l-S))/2}return{k:l,r:w,dk:u,adk:a}},inflections:function(c){if(c.length<4)return[];const e=Q.align(c,{p1:c[0],p2:c.slice(-1)[0]}),n=e[2].x*e[1].y,s=e[3].x*e[1].y,r=e[1].x*e[2].y,o=e[3].x*e[2].y,i=18*(-3*n+2*s+3*r-o),a=18*(3*n-s-3*r),u=18*(r-n);if(Q.approximately(i,0)){if(!Q.approximately(a,0)){let d=-u/a;if(0<=d&&d<=1)return[d]}return[]}const l=2*i;if(Q.approximately(l,0))return[];const w=a*a-4*i*u;if(w<0)return[];const x=Math.sqrt(w);return[(x-a)/l,-(a+x)/l].filter(function(d){return 0<=d&&d<=1})},bboxoverlap:function(c,e){const n=["x","y"],s=n.length;for(let r=0,o,i,a,u;r<s;r++)if(o=n[r],i=c[o].mid,a=e[o].mid,u=(c[o].size+e[o].size)/2,gt(i-a)>=u)return!1;return!0},expandbox:function(c,e){e.x.min<c.x.min&&(c.x.min=e.x.min),e.y.min<c.y.min&&(c.y.min=e.y.min),e.z&&e.z.min<c.z.min&&(c.z.min=e.z.min),e.x.max>c.x.max&&(c.x.max=e.x.max),e.y.max>c.y.max&&(c.y.max=e.y.max),e.z&&e.z.max>c.z.max&&(c.z.max=e.z.max),c.x.mid=(c.x.min+c.x.max)/2,c.y.mid=(c.y.min+c.y.max)/2,c.z&&(c.z.mid=(c.z.min+c.z.max)/2),c.x.size=c.x.max-c.x.min,c.y.size=c.y.max-c.y.min,c.z&&(c.z.size=c.z.max-c.z.min)},pairiteration:function(c,e,n){const s=c.bbox(),r=e.bbox(),o=1e5,i=n||.5;if(s.x.size+s.y.size<i&&r.x.size+r.y.size<i)return[(o*(c._t1+c._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let a=c.split(.5),u=e.split(.5),l=[{left:a.left,right:u.left},{left:a.left,right:u.right},{left:a.right,right:u.right},{left:a.right,right:u.left}];l=l.filter(function(x){return Q.bboxoverlap(x.left.bbox(),x.right.bbox())});let w=[];return l.length===0||(l.forEach(function(x){w=w.concat(Q.pairiteration(x.left,x.right,i))}),w=w.filter(function(x,d){return w.indexOf(x)===d})),w},getccenter:function(c,e,n){const s=e.x-c.x,r=e.y-c.y,o=n.x-e.x,i=n.y-e.y,a=s*ot(ht)-r*ft(ht),u=s*ft(ht)+r*ot(ht),l=o*ot(ht)-i*ft(ht),w=o*ft(ht)+i*ot(ht),x=(c.x+e.x)/2,d=(c.y+e.y)/2,y=(e.x+n.x)/2,S=(e.y+n.y)/2,h=x+a,f=d+u,p=y+l,m=S+w,g=Q.lli8(x,d,h,f,y,S,p,m),M=Q.dist(g,c);let v=yt(c.y-g.y,c.x-g.x),b=yt(e.y-g.y,e.x-g.x),V=yt(n.y-g.y,n.x-g.x),_;return v<V?((v>b||b>V)&&(v+=bt),v>V&&(_=V,V=v,v=_)):V<b&&b<v?(_=V,V=v,v=_):V+=bt,g.s=v,g.e=V,g.r=M,g},numberSort:function(c,e){return c-e}};class Lt{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return Q.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),s=1;s<e.length;s++)Q.expandbox(n,e[s].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(s){n.push(...s.offset(e))}),new Lt(n)}}const{abs:wt,min:ne,max:se,cos:Ye,sin:Ge,acos:Je,sqrt:vt}=Math,Ke=Math.PI;class B{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),s=!1;if(typeof n[0]=="object"){s=n.length;const y=[];n.forEach(function(S){["x","y","z"].forEach(function(h){typeof S[h]<"u"&&y.push(S[h])})}),n=y}let r=!1;const o=n.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");r=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const i=this._3d=!r&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",a=this.points=[];for(let y=0,S=i?3:2;y<o;y+=S){var u={x:n[y],y:n[y+1]};i&&(u.z=n[y+2]),a.push(u)}const l=this.order=a.length-1,w=this.dims=["x","y"];i&&w.push("z"),this.dimlen=w.length;const x=Q.align(a,{p1:a[0],p2:a[l]}),d=Q.dist(a[0],a[l]);this._linear=x.reduce((y,S)=>y+wt(S.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,s,r){if(typeof r>"u"&&(r=.5),r===0)return new B(n,n,s);if(r===1)return new B(e,n,n);const o=B.getABC(2,e,n,s,r);return new B(e,o.A,s)}static cubicFromPoints(e,n,s,r,o){typeof r>"u"&&(r=.5);const i=B.getABC(3,e,n,s,r);typeof o>"u"&&(o=Q.dist(n,i.C));const a=o*(1-r)/r,u=Q.dist(e,s),l=(s.x-e.x)/u,w=(s.y-e.y)/u,x=o*l,d=o*w,y=a*l,S=a*w,h={x:n.x-x,y:n.y-d},f={x:n.x+y,y:n.y+S},p=i.A,m={x:p.x+(h.x-p.x)/(1-r),y:p.y+(h.y-p.y)/(1-r)},g={x:p.x+(f.x-p.x)/r,y:p.y+(f.y-p.y)/r},M={x:e.x+(m.x-e.x)/r,y:e.y+(m.y-e.y)/r},v={x:s.x+(g.x-s.x)/(1-r),y:s.y+(g.y-s.y)/(1-r)};return new B(e,M,v,s)}static getUtils(){return Q}getUtils(){return B.getUtils()}static get PolyBezier(){return Lt}valueOf(){return this.toString()}toString(){return Q.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,s=e[0].y,r=["M",n,s,this.order===2?"Q":"C"];for(let o=1,i=e.length;o<i;o++)r.push(e[o].x),r.push(e[o].y);return r.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=Q.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=Q.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return Q.length(this.derivative.bind(this))}static getABC(e=2,n,s,r,o=.5){const i=Q.projectionratio(o,e),a=1-i,u={x:i*n.x+a*r.x,y:i*n.y+a*r.y},l=Q.abcratio(o,e);return{A:{x:s.x+(s.x-u.x)/l,y:s.y+(s.y-u.y)/l},B:s,C:u,S:n,E:r}}getABC(e,n){n=n||this.get(e);let s=this.points[0],r=this.points[this.order];return B.getABC(this.order,s,n,r,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,s,r;n<e;n++)r=n/(e-1),s=this.compute(r),s.t=r,this._lut.push(s);return this._lut}on(e,n){n=n||5;const s=this.getLUT(),r=[];for(let o=0,i,a=0;o<s.length;o++)i=s[o],Q.dist(i,e)<n&&(r.push(i),a+=o/s.length);return r.length?t/=r.length:!1}project(e){const n=this.getLUT(),s=n.length-1,r=Q.closest(n,e),o=r.mpos,i=(o-1)/s,a=(o+1)/s,u=.1/s;let l=r.mdist,w=i,x=w,d;l+=1;for(let y;w<a+u;w+=u)d=this.compute(w),y=Q.dist(e,d),y<l&&(l=y,x=w);return x=x<0?0:x>1?1:x,d=this.compute(x),d.t=x,d.d=l,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Q.computeWithRatios(e,this.points,this.ratios,this._3d):Q.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],s=e.length;for(let r=1,o,i;r<s;r++)o=e[r],i=e[r-1],n[r]={x:(s-r)/s*o.x+r/s*i.x,y:(s-r)/s*o.y+r/s*i.y};return n[s]=e[s-1],new B(n)}derivative(e){return Q.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Q.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new B(Q.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Q.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Q.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),s=vt(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/s,y:n.x/s}}__normal3(e){const n=this.derivative(e),s=this.derivative(e+.01),r=vt(n.x*n.x+n.y*n.y+n.z*n.z),o=vt(s.x*s.x+s.y*s.y+s.z*s.z);n.x/=r,n.y/=r,n.z/=r,s.x/=o,s.y/=o,s.z/=o;const i={x:s.y*n.z-s.z*n.y,y:s.z*n.x-s.x*n.z,z:s.x*n.y-s.y*n.x},a=vt(i.x*i.x+i.y*i.y+i.z*i.z);i.x/=a,i.y/=a,i.z/=a;const u=[i.x*i.x,i.x*i.y-i.z,i.x*i.z+i.y,i.x*i.y+i.z,i.y*i.y,i.y*i.z-i.x,i.x*i.z-i.y,i.y*i.z+i.x,i.z*i.z];return{t:e,x:u[0]*n.x+u[1]*n.y+u[2]*n.z,y:u[3]*n.x+u[4]*n.y+u[5]*n.z,z:u[6]*n.x+u[7]*n.y+u[8]*n.z}}hull(e){let n=this.points,s=[],r=[],o=0;for(r[o++]=n[0],r[o++]=n[1],r[o++]=n[2],this.order===3&&(r[o++]=n[3]);n.length>1;){s=[];for(let i=0,a,u=n.length-1;i<u;i++)a=Q.lerp(e,n[i],n[i+1]),r[o++]=a,s.push(a);n=s}return r}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const s=this.hull(e),r={left:this.order===2?new B([s[0],s[3],s[5]]):new B([s[0],s[4],s[7],s[9]]),right:this.order===2?new B([s[5],s[4],s[2]]):new B([s[9],s[8],s[6],s[3]]),span:s};return r.left._t1=Q.map(0,0,1,this._t1,this._t2),r.left._t2=Q.map(e,0,1,this._t1,this._t2),r.right._t1=Q.map(e,0,1,this._t1,this._t2),r.right._t2=Q.map(1,0,1,this._t1,this._t2),n?(n=Q.map(n,e,1,0,1),r.right.split(n).left):r}extrema(){const e={};let n=[];return this.dims.forEach((function(s){let r=function(i){return i[s]},o=this.dpoints[0].map(r);e[s]=Q.droots(o),this.order===3&&(o=this.dpoints[1].map(r),e[s]=e[s].concat(Q.droots(o))),e[s]=e[s].filter(function(i){return i>=0&&i<=1}),n=n.concat(e[s].sort(Q.numberSort))}).bind(this)),e.values=n.sort(Q.numberSort).filter(function(s,r){return n.indexOf(s)===r}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(s){n[s]=Q.getminmax(this,s,e[s])}).bind(this)),n}overlaps(e){const n=this.bbox(),s=e.bbox();return Q.bboxoverlap(n,s)}offset(e,n){if(typeof n<"u"){const s=this.get(e),r=this.normal(e),o={c:s,n:r,x:s.x+r.x*n,y:s.y+r.y*n};return this._3d&&(o.z=s.z+r.z*n),o}if(this._linear){const s=this.normal(0),r=this.points.map(function(o){const i={x:o.x+e*s.x,y:o.y+e*s.y};return o.z&&s.z&&(i.z=o.z+e*s.z),i});return[new B(r)]}return this.reduce().map(function(s){return s._linear?s.offset(e)[0]:s.scale(e)})}simple(){if(this.order===3){const r=Q.angle(this.points[0],this.points[3],this.points[1]),o=Q.angle(this.points[0],this.points[3],this.points[2]);if(r>0&&o<0||r<0&&o>0)return!1}const e=this.normal(0),n=this.normal(1);let s=e.x*n.x+e.y*n.y;return this._3d&&(s+=e.z*n.z),wt(Je(s))<Ke/3}reduce(){let e,n=0,s=0,r=.01,o,i=[],a=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),n=u[0],e=1;e<u.length;e++)s=u[e],o=this.split(n,s),o._t1=n,o._t2=s,i.push(o),n=s;return i.forEach(function(l){for(n=0,s=0;s<=1;)for(s=n+r;s<=1+r;s+=r)if(o=l.split(n,s),!o.simple()){if(s-=r,wt(n-s)<r)return[];o=l.split(n,s),o._t1=Q.map(n,0,1,l._t1,l._t2),o._t2=Q.map(s,0,1,l._t1,l._t2),a.push(o),n=s;break}n<1&&(o=l.split(n,1),o._t1=Q.map(n,0,1,l._t1,l._t2),o._t2=l._t2,a.push(o))}),a}translate(e,n,s){s=typeof s=="number"?s:n;const r=this.order;let o=this.points.map((i,a)=>(1-a/r)*n+a/r*s);return new B(this.points.map((i,a)=>({x:i.x+e.x*o[a],y:i.y+e.y*o[a]})))}scale(e){const n=this.order;let s=!1;if(typeof e=="function"&&(s=e),s&&n===2)return this.raise().scale(s);const r=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):e,s?s(1):e);const i=s?s(0):e,a=s?s(1):e,u=[this.offset(0,10),this.offset(1,10)],l=[],w=Q.lli4(u[0],u[0].c,u[1],u[1].c);if(!w)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(x){const d=l[x*n]=Q.copy(o[x*n]);d.x+=(x?a:i)*u[x].n.x,d.y+=(x?a:i)*u[x].n.y}),s?([0,1].forEach(function(x){if(!(n===2&&x)){var d=o[x+1],y={x:d.x-w.x,y:d.y-w.y},S=s?s((x+1)/n):e;s&&!r&&(S=-S);var h=vt(y.x*y.x+y.y*y.y);y.x/=h,y.y/=h,l[x+1]={x:d.x+S*y.x,y:d.y+S*y.y}}}),new B(l)):([0,1].forEach(x=>{if(n===2&&x)return;const d=l[x*n],y=this.derivative(x),S={x:d.x+y.x,y:d.y+y.y};l[x+1]=Q.lli4(d,S,w,o[x+1])}),new B(l))}outline(e,n,s,r){if(n=n===void 0?e:n,this._linear){const v=this.normal(0),b=this.points[0],V=this.points[this.points.length-1];let _,I,C;s===void 0&&(s=e,r=n),_={x:b.x+v.x*e,y:b.y+v.y*e},C={x:V.x+v.x*s,y:V.y+v.y*s},I={x:(_.x+C.x)/2,y:(_.y+C.y)/2};const z=[_,I,C];_={x:b.x-v.x*n,y:b.y-v.y*n},C={x:V.x-v.x*r,y:V.y-v.y*r},I={x:(_.x+C.x)/2,y:(_.y+C.y)/2};const T=[C,I,_],F=Q.makeline(T[2],z[0]),O=Q.makeline(z[2],T[0]),j=[F,new B(z),O,new B(T)];return new Lt(j)}const o=this.reduce(),i=o.length,a=[];let u=[],l,w=0,x=this.length();const d=typeof s<"u"&&typeof r<"u";function y(v,b,V,_,I){return function(C){const z=_/V,T=(_+I)/V,F=b-v;return Q.map(C,0,1,v+z*F,v+T*F)}}o.forEach(function(v){const b=v.length();d?(a.push(v.scale(y(e,s,x,w,b))),u.push(v.scale(y(-n,-r,x,w,b)))):(a.push(v.scale(e)),u.push(v.scale(-n))),w+=b}),u=u.map(function(v){return l=v.points,l[3]?v.points=[l[3],l[2],l[1],l[0]]:v.points=[l[2],l[1],l[0]],v}).reverse();const S=a[0].points[0],h=a[i-1].points[a[i-1].points.length-1],f=u[i-1].points[u[i-1].points.length-1],p=u[0].points[0],m=Q.makeline(f,S),g=Q.makeline(h,p),M=[m].concat(a).concat([g]).concat(u);return new Lt(M)}outlineshapes(e,n,s){n=n||e;const r=this.outline(e,n).curves,o=[];for(let i=1,a=r.length;i<a/2;i++){const u=Q.makeshape(r[i],r[a-i],s);u.startcap.virtual=i>1,u.endcap.virtual=i<a/2-1,o.push(u)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof B&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=ne(e.p1.x,e.p2.x),s=ne(e.p1.y,e.p2.y),r=se(e.p1.x,e.p2.x),o=se(e.p1.y,e.p2.y);return Q.roots(this.points,e).filter(i=>{var a=this.get(i);return Q.between(a.x,n,r)&&Q.between(a.y,s,o)})}selfintersects(e){const n=this.reduce(),s=n.length-2,r=[];for(let o=0,i,a,u;o<s;o++)a=n.slice(o,o+1),u=n.slice(o+2),i=this.curveintersects(a,u,e),r.push(...i);return r}curveintersects(e,n,s){const r=[];e.forEach(function(i){n.forEach(function(a){i.overlaps(a)&&r.push({left:i,right:a})})});let o=[];return r.forEach(function(i){const a=Q.pairiteration(i.left,i.right,s);a.length>0&&(o=o.concat(a))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,s,r){const o=(r-s)/4,i=this.get(s+o),a=this.get(r-o),u=Q.dist(e,n),l=Q.dist(e,i),w=Q.dist(e,a);return wt(l-u)+wt(w-u)}_iterate(e,n){let s=0,r=1,o;do{o=0,r=1;let i=this.get(s),a,u,l,w,x=!1,d=!1,y,S=r,h=1;do if(d=x,w=l,S=(s+r)/2,a=this.get(S),u=this.get(r),l=Q.getccenter(i,a,u),l.interval={start:s,end:r},x=this._error(l,i,s,r)<=e,y=d&&!x,y||(h=r),x){if(r>=1){if(l.interval.end=h=1,w=l,r>1){let p={x:l.x+l.r*Ye(l.e),y:l.y+l.r*Ge(l.e)};l.e+=Q.angle({x:l.x,y:l.y},p,this.get(1))}break}r=r+(r-s)/2}else r=S;while(!y&&o++<100);if(o>=100)break;w=w||l,n.push(w),s=h}while(r<1);return n}}class fe{#t=document.createElementNS("http://www.w3.org/2000/svg","svg");#e=document.createElementNS("http://www.w3.org/2000/svg","path");constructor(){this.#t.style.width="0",this.#t.style.height="0",this.#t.style.position="absolute",this.#t.appendChild(this.#e),document.body.appendChild(this.#t)}getBBox(){return this.#e.getBBox()}get d(){return this.#e.getAttribute("d")??""}set d(e){this.#e.style.d="",this.#e.style.d=P.cssifyPath(e);const n=this.#e.style.d!="";if(this.#e.style.d="",n)this.#e.setAttribute("d",e);else throw new Error("Invalid path")}get empty(){return this.d==""}clear(){this.d=""}get length(){return this.#e.getTotalLength()}getPoint(e){return this.#e.getPointAtLength(e)}load(e){typeof e!="string"&&(e instanceof P||(e=new P([e])),e=e.rawPath),this.d=e}measure(e){return this.load(e),this.length}}const K=new Intl.NumberFormat("en-US",{maximumSignificantDigits:8,useGrouping:!1}).format;class q{constructor(e,n,s,r){this.x0=e,this.y0=n,this.x=s,this.y=r,R.assertFinite(e,n,s,r),this.asString=`L ${K(s)},${K(r)}`,this.outgoingAngle=this.incomingAngle=Math.atan2(r-n,s-e)}reverse(){return new q(this.x,this.y,this.x0,this.y0)}toJSON(){return{command:"L",x0:this.x0,y0:this.y0,x:this.x,y:this.y}}static relative(e,n,s,r){return new this(e,n,s+e,r+n)}incomingAngle;outgoingAngle;command="L";asString;get length(){return Math.hypot(this.x0-this.x,this.y0-this.y)}translate(e,n){return new q(this.x0+e,this.y0+n,this.x+e,this.y+n)}toCubic(){return new rt(this.x0,this.y0,R.lerp(this.x0,this.x,1/3),R.lerp(this.y0,this.y,1/3),R.lerp(this.x0,this.x,2/3),R.lerp(this.y0,this.y,2/3),this.x,this.y)}transform(e){const n=nt(this.x,this.y,e),s=nt(this.x0,this.y0,e);return new q(s.x,s.y,n.x,n.y)}}class W{constructor(e,n,s,r,o,i,a){this.x0=e,this.y0=n,this.x1=s,this.y1=r,this.x=o,this.y=i,this.creationInfo=a,R.assertFinite(e,n,s,r,o,i),this.asString=`Q ${K(s)},${K(r)} ${K(o)},${K(i)}`}reverse(){return W.controlPoints(this.x,this.y,this.x1,this.y1,this.x0,this.y0)}static line(e,n,s,r,o){return new this(e,n,(e+s)/2,(n+r)/2,s,r,o)}static line4(e,n,s,r){return this.line(e,n,s,r,{source:"line"})}static line2(e,n){return this.line4(e.x,e.y,n.x,n.y)}static angles(e,n,s,r,o,i){R.assertFinite(e,n,s,r,o,i);const a=dn({x0:e,y0:n,angle:s},{x0:r,y0:o,angle:i+Math.PI});return a?new this(e,n,a.x,a.y,r,o,{source:"angles",success:!0,angle:i,angle0:s}):this.line(e,n,r,o,{source:"angles",success:!1,angle:i,angle0:s})}newAngles(e,n){return e??=this.requestedIncomingAngle,n??=this.requestedOutgoingAngle,W.angles(this.x0,this.y0,e,this.x,this.y,n)}toJSON(){return{command:"Q",x0:this.x0,y0:this.y0,x1:this.x1,y1:this.y1,x:this.x,y:this.y,creationInfo:this.creationInfo}}static controlPoints(e,n,s,r,o,i){return new this(e,n,s,r,o,i,{source:"controlPoints"})}static relative(e,n,s,r,o,i){return this.controlPoints(e,n,s+e,r+n,o+e,i+n)}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y1,this.x-this.x1)}get requestedIncomingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle0:this.incomingAngle}get requestedOutgoingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle:this.outgoingAngle}command="Q";asString;translate(e,n){return W.controlPoints(this.x0+e,this.y0+n,this.x1+e,this.y1+n,this.x+e,this.y+n)}transform(e){const n=nt(this.x0,this.y0,e),s=nt(this.x1,this.y1,e),r=nt(this.x,this.y,e);return W.controlPoints(n.x,n.y,s.x,s.y,r.x,r.y)}toCubic(){return new rt(this.x0,this.y0,R.lerp(this.x0,this.x1,2/3),R.lerp(this.y0,this.y1,2/3),R.lerp(this.x,this.x1,2/3),R.lerp(this.y,this.y1,2/3),this.x,this.y)}split(e){const{x:n,x0:s,x1:r,y:o,y0:i,y1:a}=this,u=s,l=i,w=(1-e)*s+e*r,x=(1-e)*i+e*a,d=(1-e)**2*s+2*(1-e)*e*r+e**2*n,y=(1-e)**2*i+2*(1-e)*e*a+e**2*o,S=W.controlPoints(u,l,w,x,d,y),h=d,f=y,p=(1-e)*r+e*n,m=(1-e)*a+e*o,g=n,M=o,v=W.controlPoints(h,f,p,m,g,M);return[S,v]}multiSplit(e){if(R.assertFinite(e),e<1||(e|0)!=e)throw new Error("wtf");const n=[];let s=this;for(;e>1;){const r=1/e;let o;[o,s]=s.split(r),n.push(o),e--}return n.push(s),n}}class rt{constructor(e,n,s,r,o,i,a,u){this.x0=e,this.y0=n,this.x1=s,this.y1=r,this.x2=o,this.y2=i,this.x=a,this.y=u,R.assertFinite(e,n,s,r,o,i,a,u),this.asString=`C ${K(s)},${K(r)} ${K(o)},${K(i)} ${K(a)},${K(u)}`}reverse(){return new rt(this.x,this.y,this.x2,this.y2,this.x1,this.y1,this.x0,this.y0)}static relative(e,n,s,r,o,i,a,u){return new this(e,n,s+e,r+n,o+e,i+n,a+e,u+n)}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y2,this.x-this.x2)}command="C";asString;translate(e,n){return new rt(this.x0+e,this.y0+n,this.x1+e,this.y1+n,this.x2+e,this.y2+n,this.x+e,this.y+n)}transform(e){const n=nt(this.x0,this.y0,e),s=nt(this.x1,this.y1,e),r=nt(this.x2,this.y2,e),o=nt(this.x,this.y,e);return new rt(n.x,n.y,s.x,s.y,r.x,r.y,o.x,o.y)}toCubic(){return this}}class H{get commands(){return this.#t}addCommand(e){this.#t.push(e),this.#e=void 0}addCommands(e){return e.forEach(n=>this.addCommand(n)),this}static fromStrings(e){let n=e.join(" ");const s=[];let r;for(;n=n.replace(/^ */,""),n!="";){let o=me.exec(n);if(o){const i=R.parseFloatX(o[1]),a=R.parseFloatX(o[2]);if(i===void 0||a===void 0)throw console.error(o,i,a,this),new Error("wtf");r&&s.push(r),r=this.M(i,a),n=o[3];continue}if(r){if(o=ge.exec(n),o){const i=R.parseFloatX(o[1]),a=R.parseFloatX(o[2]);if(i===void 0||a===void 0)throw console.error(o,i,a,this),new Error("wtf");r=r.L(i,a),n=o[3];continue}if(o=xe.exec(n),o){const i=R.parseFloatX(o[1]),a=R.parseFloatX(o[2]),u=R.parseFloatX(o[3]),l=R.parseFloatX(o[4]);if(i===void 0||a===void 0||u===void 0||l===void 0)throw console.error(o,i,a,u,l,this),new Error("wtf");r=r.Q(i,a,u,l),n=o[5];continue}if(o=we.exec(n),o){const i=R.parseFloatX(o[1]),a=R.parseFloatX(o[2]),u=R.parseFloatX(o[3]),l=R.parseFloatX(o[4]),w=R.parseFloatX(o[5]),x=R.parseFloatX(o[6]);if(i===void 0||a===void 0||u===void 0||l===void 0||w===void 0||x===void 0)throw console.error(o,i,a,u,l,w,x,this),new Error("wtf");r=r.C(i,a,u,l,w,x),n=o[7];continue}}throw console.error(n),new Error("wtf")}return r&&s.push(r),s}static M(e,n){const s=new H;return s.M(e,n),s}#t=[];get pathShape(){return new P(this.#t)}#e;M(e,n,s=NaN){return R.assertFinite(e,n),this.#e={x:e,y:n,outgoingAngle:s},this}previous(){return this.#e??this.#t.at(-1)}H(e){const n=this.previous();return this.addCommand(new q(n.x,n.y,e,n.y)),this}V(e){const n=this.previous();return this.addCommand(new q(n.x,n.y,n.x,e)),this}L(e,n){const s=this.previous();return this.addCommand(new q(s.x,s.y,e,n)),this}Q(e,n,s,r){const o=this.previous();return this.addCommand(W.controlPoints(o.x,o.y,e,n,s,r)),this}Q_HV(e,n){const s=this.previous();return this.Q(e,s.y,e,n)}Q_VH(e,n){const s=this.previous();return this.Q(s.x,n,e,n)}Q_angles(e,n,s,r){const o=this.previous();if(r??=o.outgoingAngle,r===void 0)throw new Error("wtf");return this.addCommand(W.angles(o.x,o.y,r,e,n,s)),this}C(e,n,s,r,o,i){const a=this.previous();return this.addCommand(new rt(a.x,a.y,e,n,s,r,o,i)),this}circle(e,n,s="cw"){const r=this.previous(),o=r.x,i=r.y,a=Math.atan2(i-n,o-e),u=Math.hypot(i-n,o-e),l=s=="cw"?1:-1,w=a+Math.PI*2*l,x=R.makeLinear(0,a,1,w);function d(h){switch(h){case 0:case 1:return r;default:{const f=x(h),p=R.polarToRectangular(u,f);return{x:e+p.x,y:n+p.y}}}}function y(h){return d(h)}return this.addParametricPath(y,8),this}arc(e,n,s,r,o){const i=this.previous(),a=i.x,u=i.y;let l=R.positiveModulo(Math.atan2(u-n,a-e),Math.PI*2);const w=Math.hypot(u-n,a-e);let x=R.positiveModulo(Math.atan2(r-n,s-e),Math.PI*2);const d=Math.hypot(r-n,s-e);o=="cw"?l>x&&(x+=Math.PI*2):l<x&&(l+=Math.PI*2);const y=Math.abs(l-x),S=Math.ceil(y*1.17+1e-4),h=R.makeLinear(0,w,1,d),f=R.makeLinear(0,l,1,x);function p(m){switch(m){case 0:return i;case 1:return{x:s,y:r};default:{const g=R.polarToRectangular(h(m),f(m));return{x:e+g.x,y:n+g.y}}}}return this.addParametricPath(p,S)}addParametricPath(e,n){if(n<=0)throw new Error("wtf");const s=1e-4/n,r=R.initializedArray(n+1,o=>{const i=o/n,a=e(i),u=pe(e,i,s);return{t:i,point:a,direction:u}});if(r.some(o=>!isFinite(o.direction))){const{x:o,y:i}=r[0].point;if(R.assertFinite(o,i),r.some(a=>a.point.x!=o||a.point.y!=i))throw new Error("Unable to create a path from this function.  Unable to compute the derivative.");for(let a=0;a<n;a++)this.Q(o,i,o,i)}else R.initializedArray(n,i=>({from:r[i],to:r[i+1]})).forEach(i=>{this.Q_angles(i.to.point.x,i.to.point.y,i.to.direction,i.from.direction)});return this}}function re(c,e,n){if(!(e>=0&&e<=1))throw new Error("Expected 0 ≤ t ≤ 1");const s=Math.max(0,e-n),r=c(s),o=Math.min(1,e+n),i=c(o),a=i.x-r.x,u=i.y-r.y;return a==0&&u==0?NaN:Math.atan2(u,a)}function pe(c,e,n){const s=re(c,e,n*2),r=re(c,e,n*1),o=s-r;return r-o}const tt=" *",k="(-?[0-9]+\\.?[0-9]*(?:[eE][-+]?[0-9]+)?)",U="(?: *[, ] *|(?=-))",me=new RegExp(`^M${tt}${k}${U}${k}(.*)$`),Ze=new RegExp(`^m${tt}${k}${U}${k}(.*)$`),ge=new RegExp(`^L${tt}${k}${U}${k}(.*)$`),oe=new RegExp(`^${U}${k}${U}${k}(.*)$`),tn=new RegExp(`^l${tt}${k}${U}${k}(.*)$`),en=new RegExp(`^H${tt}${k}(.*)$`),nn=new RegExp(`^h${tt}${k}(.*)$`),sn=new RegExp(`^V${tt}${k}(.*)$`),rn=new RegExp(`^v${tt}${k}(.*)$`),ye=new RegExp(`^${U}${k}(.*)$`),on=ye,xe=new RegExp(`^Q${tt}${k}${U}${k}${U}${k}${U}${k}(.*)$`),an=new RegExp(`^${U}${k}${U}${k}${U}${k}${U}${k}(.*)$`),cn=new RegExp(`^q${tt}${k}${U}${k}${U}${k}${U}${k}(.*)$`),we=new RegExp(`^C${tt}${k}${U}${k}${U}${k}${U}${k}${U}${k}${U}${k}(.*)$`),ie=new RegExp(`^${U}${k}${U}${k}${U}${k}${U}${k}${U}${k}${U}${k}(.*)$`),hn=new RegExp(`^c${tt}${k}${U}${k}${U}${k}${U}${k}${U}${k}${U}${k}(.*)$`),ln=new RegExp("^[zZ](.*)$");class un extends Error{constructor(e,n){super(e),this.where=n}}class P{getLength(){const e=We(Fe(ze(this.rawPath)));let n=0;return e.forEach((s,r)=>{if(r>0){const o=e[r-1];if(s[0]!="C")throw new Error("wtf");const a=o.at(-2),u=o.at(-1);if(typeof a!="number"||typeof u!="number")throw new Error("wtf");const l=[a,u,...s.slice(1)],w=new B(l);n+=w.length()}}),n}reverse(){return new P(this.commands.toReversed().map(e=>e.reverse()))}static fromString(e){const n=this.fromJson(e);if(n)return n;let s=e,r=null;const o=d=>new un(d,s),i=d=>{const y=R.parseFloatX(d);if(y===void 0)throw o(`Invalid number: "${d}"`);return y};let a=0,u=0;const l=[],w=d=>{l.push(d),a=d.x,u=d.y};let x;for(;s=s.replace(/^ */,""),s!="";){if(r=me.exec(s)){a=i(r[1]),u=i(r[2]),x={x0:a,y0:u},s=r[3];continue}if(r=Ze.exec(s)){for(a+=i(r[1]),u+=i(r[2]),x={x0:a,y0:u},s=r[3];r=oe.exec(s);){const d=q.relative(a,u,i(r[1]),i(r[2]));w(d),s=r[3]}continue}if(!x)throw o("Must start with an M command.");if(r=ln.exec(s)){if(a!=x.x0||u!=x.y0){const d=new q(a,u,x.x0,x.y0);w(d)}s=r[1];continue}if(r=ge.exec(s)){const d=i(r[1]),y=i(r[2]),S=new q(a,u,d,y);w(S),s=r[3];continue}if(r=tn.exec(s)){for(;r;){const d=i(r[1]),y=i(r[2]),S=q.relative(a,u,d,y);w(S),s=r[3],r=oe.exec(s)}continue}if(r=en.exec(s)){const d=i(r[1]),y=new q(a,u,d,u);w(y),s=r[2];continue}if(r=nn.exec(s)){for(;r;){const d=i(r[1]),y=new q(a,u,a+d,u);w(y),s=r[2],r=on.exec(s)}continue}if(r=sn.exec(s)){const d=i(r[1]),y=new q(a,u,a,d);w(y),s=r[2];continue}if(r=rn.exec(s)){for(;r;){const d=i(r[1]),y=new q(a,u,a,u+d);w(y),s=r[2],r=ye.exec(s)}continue}if(r=xe.exec(s)){const d=i(r[1]),y=i(r[2]),S=i(r[3]),h=i(r[4]),f=W.controlPoints(a,u,d,y,S,h);w(f),s=r[5];continue}if(r=cn.exec(s)){for(;r;){const d=i(r[1]),y=i(r[2]),S=i(r[3]),h=i(r[4]),f=W.relative(a,u,d,y,S,h);w(f),s=r[5],r=an.exec(s)}continue}if(r=we.exec(s)){for(;r;){const d=i(r[1]),y=i(r[2]),S=i(r[3]),h=i(r[4]),f=i(r[5]),p=i(r[6]),m=new rt(a,u,d,y,S,h,f,p);w(m),s=r[7],r=ie.exec(s)}continue}if(r=hn.exec(s)){for(;r;){const d=i(r[1]),y=i(r[2]),S=i(r[3]),h=i(r[4]),f=i(r[5]),p=i(r[6]),m=rt.relative(a,u,d,y,S,h,f,p);w(m),s=r[7],r=ie.exec(s)}continue}throw o("Confused.")}return new this(l)}static fromJson(e){try{const s=JSON.parse(e).commands.map(r=>{switch(r.command){case"C":{const{x0:o,y0:i,x1:a,y1:u,x2:l,y2:w,x,y:d}=r;return new rt(o,i,a,u,l,w,x,d)}case"L":{const{x0:o,y0:i,x:a,y:u}=r;return new q(o,i,a,u)}case"Q":{const{x0:o,y0:i,x:a,y:u,creationInfo:l}=r;switch(l.source){case"angles":{const{angle0:w,angle:x}=l,d=W.angles(o,i,w,a,u,x);return(d.creationInfo.source!="angles"||d.creationInfo.success!=l.success)&&console.warn("different",r,d),d}case"controlPoints":{const{x1:w,y1:x}=r;return W.controlPoints(o,i,w,x,a,u)}case"line":return W.line4(o,i,a,u);default:throw new Error(`Unknown source: "${l.source}"`)}}default:throw new Error(`Unknown command: "${r.command}"`)}});return new P(s)}catch{return}}matchForMorph(e){const n=this.commands.map(a=>a.toCubic()),s=e.commands.map(a=>a.toCubic());if(n.length!=s.length){const{shorter:a,longer:u}=n.length<s.length?{shorter:n,longer:s}:{shorter:s,longer:n};if(a.length==0)throw new Error("can't morph something into nothing");const l=u.length/a.length,w=[];a.forEach((x,d)=>{const y=Math.round((d+1)*l);for(;w.length<y;)w.push(x)}),a.length=0,a.push(...w)}if(n.length!=s.length)throw new Error("wtf");function r(a){return P.cssifyPath(a.map(u=>new P([u]).rawPath).join())}const o=r(n),i=r(s);return[o,i]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}constructor(e){this.commands=[...e]}static cssifyPath(e){return`path('${e}')`}get cssPath(){return P.cssifyPath(this.rawPath)}makeElement(){const e=document.createElementNS("http://www.w3.org/2000/svg","path"),n=this.cssPath;if(e.style.d=n,e.style.d=="")throw console.error(n,e),new Error("wtf");return e}static needAnM(e,n){return n?!e||e.x!=n.x0||e.y!=n.y0:!1}get rawPath(){return this.splitOnMove().flatMap(e=>{const n=[`M ${K(e.startX)},${K(e.startY)}`];return e.commands.forEach(s=>n.push(s.asString)),e.startX==e.endX&&e.startY==e.endY&&n.push("Z"),n}).join(" ")}splitOnMove(){const e=[];let n=[];return this.commands.forEach(s=>{P.needAnM(n.at(-1),s)&&(n=[],e.push(n)),n.push(s)}),e.map(s=>new P(s))}static join(e){return new P(e.flatMap(({Δx:n,Δy:s,shape:r})=>r.translate(n,s).commands))}convertToCubics(){return new P(this.commands.map(e=>e.toCubic()))}translate(e,n){return new P(this.commands.map(s=>s.translate(e,n)))}transform(e){return new P(this.commands.map(n=>n.transform(e)))}static parametric(e,n){const s=e(0);return H.M(s.x,s.y).addParametricPath(e,n).pathShape}static glitchFreeParametric(e,n){const s=this.#e(e,n,0);return R.assertNonNullable(s)}static#t=new fe;static#e(e,n,s){if(s>0&&console.log(s),s>=4){console.log("⚝");return}const o=this.parametric(e,n).commands.map((u,l,w)=>{const x=l/w.length,d=(l+1)/w.length;return{command:u,initialT:x,finalT:d}});let i=0;const a=u=>{const l=new this([u]);this.#t.d=l.rawPath;const w=this.#t.length,x=Math.hypot(u.x0-u.x,u.y0-u.y),d=w/x;return d<2||!isFinite(d)};for(;i<o.length;){const u=o[i].command;if(a(u))i++;else{const l=Math.max(0,i-1);let w=i+1;for(;w<o.length;){const m=o[w].command;if(w++,a(m))break}const x=o[l].initialT,d=o[w-1].finalT,y=R.makeLinear(0,x,1,d),S=m=>e(y(m)),h=w-l,f=h+1,p=this.#e(S,f,s+1);if(p===void 0){if(s>0)return;const m=o[i],{x0:g,y0:M,x:v,y:b}=m.command;m.command=W.line4(g,M,v,b),i++}else o.splice(l,h,...p.commands.map((m,g,M)=>{const v=y(g/M.length),b=y((g+1)/M.length);return{command:m,initialT:v,finalT:b}})),i+=f}}return new P(o.map(u=>u.command))}static fixAngleRounding(e){return e+400-400}static toDegrees(e){return Math.round(e*R.degreesPerRadian*100)/100}dump(){const e=this.commands.map((n,s)=>{const{x0:r,y0:o,x:i,y:a,incomingAngle:u,outgoingAngle:l,command:w}=n,x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d",new P([n]).rawPath);const d=x.getTotalLength(),y=this.commands[s-1],h=P.needAnM(y,n)?{}:{difference:P.toDegrees(R.angleBetween(y.outgoingAngle,u))};return{x0:r,y0:o,x:i,y:a,incomingAngle:P.toDegrees(u),outgoingAngle:P.toDegrees(l),length:d,c:w,...h}});console.table(e),console.log(this.rawPath),console.log(JSON.stringify(this))}}function dn(c,e){if(R.assertFinite(c.x0,c.y0,c.angle,e.x0,e.y0,e.angle),isNaN(c.angle)||isNaN(e.angle)||c.angle==e.angle)return;const n=Math.tan(c.angle),s=Math.tan(e.angle),r=Math.abs(n)*100>Number.MAX_SAFE_INTEGER,o=Math.abs(s)*100>Number.MAX_SAFE_INTEGER;if(r&&o)return;const i=Math.atan2(e.y0-c.y0,e.x0-c.x0),a=R.angleBetween(c.angle,i),u=R.angleBetween(e.angle,i);if(a==0||Math.abs(u)==Math.PI){if(Math.abs(a)==Math.PI||u==0)return;const x=(c.x0+e.x0)/2,d=(c.y0+e.y0)/2;return{x,y:d}}const l=Math.sign(a),w=Math.sign(u);if(!(l!=w||l==0)&&!(Math.abs(u)<=Math.abs(a)+R.radiansPerDegree))if(r||o){const x=r?c.x0:e.x0,d=r?{...e,slope:s}:{...c,slope:n},y=d.slope*(x-d.x0)+d.y0;return{x,y}}else{const x=(e.y0-s*e.x0-c.y0+n*c.x0)/(n-s),d=n*(x-c.x0)+c.y0;return{x,y:d}}}function fn(c){if(!(c instanceof W))throw new Error("wtf");if(c.creationInfo.source!="angles")throw new Error("wtf");return c}class St{constructor(e,n=16,s){this.f=e;const r=P.parametric(e,n);this.#e=r.commands.map((o,i,a)=>{const u=i/a.length,l=(i+1)/a.length;return this.#r(u,l,fn(o))}).sort((o,i)=>o.metric-i.metric),s===void 0&&(St.#t.load(r),s=St.#t.getBBox()),typeof s!="number"&&(s=Math.hypot(s.height,s.width)),this.#n=.001*s}static#t=new fe;#e;#n;get commands(){return this.#e}#o(e){this.#e.splice(this.#e.findLastIndex(n=>n.metric<=e.metric)+1,0,e)}#r(e,n,s){let o=0;{const u=[{x:s.x0,y:s.y0}];for(let l=1;l<4;l++){const w=l/4,x=R.lerp(e,n,w);u.push(this.f(x))}u.push({x:s.x,y:s.y}),u.forEach((l,w)=>{const x=u[w+1];x&&(o+=Math.hypot(l.x-x.x,l.y-x.y))})}const i=St.#t.measure(s),a=Math.abs(o-i);return s.creationInfo.success,{startT:e,endT:n,command:s,polyLineLength:o,curveLength:i,metric:a}}add(e){for(let n=0;n<e;n++)this.addOne()}addOne(){const e=this.#e.pop(),{startT:n,endT:s}=e,r=(n+s)/2,o=this.f(r),i=1e-4*(r-n),a=pe(this.f,r,i),u=W.angles(e.command.x0,e.command.y0,e.command.requestedIncomingAngle,o.x,o.y,a),l=this.#r(n,r,u);this.#o(l);const w=W.angles(o.x,o.y,a,e.command.x,e.command.y,e.command.requestedOutgoingAngle),x=this.#r(r,s,w);return this.#o(x),{toSplit:e,firstCommandInfo:l,secondCommandInfo:x}}done(){return this.commands.at(-1).metric<this.#n}go(e=50){for(let n=0;n<e&&!this.done();n++)this.addOne()}get pathShape(){return new P(this.#e.toSorted((e,n)=>e.startT-n.startT).map(({command:e})=>e))}summarize(){function e(n){n.sort((w,x)=>w-x);const s=n.length;function r(w){const d=(n.length-1)*w;if(Number.isInteger(d))return n[d];{const y=Math.floor(d),S=y+1,h=d-y;return R.lerp(n[y],n[S],h)}}if(n.length<2)throw new Error("wtf");const o=R.initializedArray(5,w=>r(w/4));let i=0,a=0;n.forEach(w=>{i+=w,a+=w*w});const u=i/s,l=Math.sqrt((a-s*u*u)/(s-1));return{quartiles:o,mean:u,standardDeviation:l}}return{polyLineLength:e(this.#e.map(({polyLineLength:n})=>n)),curveLength:e(this.#e.map(({curveLength:n})=>n)),metric:e(this.#e.map(({metric:n})=>n)),tCoverage:e(this.#e.map(({startT:n,endT:s})=>s-n)),generation:e(this.#e.map(({startT:n,endT:s})=>-Math.log2(s-n))),count:this.#e.length}}dump(){console.table(this.commands.map(({startT:e,endT:n,metric:s,curveLength:r})=>({startT:e,tCoverage:n-e,generation:-Math.log2(n-e),metric:s,curveLength:r})))}static chordRatio(e){const n=R.FULL_CIRCLE/e,s=2*Math.sin(n/2);return n/s}}window.ParametricToPath=St;class Ut{constructor(e,n,s){this.advance=n,this.fontMetrics=s,e instanceof P?this.#t=()=>e:this.#t=e}reshape(e){return new Ut(e,this.advance,this.fontMetrics)}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(e=>({innerShape:e,element:e.makeElement()}))}}class pn{constructor(e,n,s,r,o,i){this.top=e,this.bottom=n,this.spaceWidth=s,this.strokeWidth=r,this.kerning=o,this.#t=new Map(i)}getWord(e){const n=[];for(const s of e){const r=this.getChar(s);r&&n.push(r)}return n}#t;getChar(e){return this.#t.get(e)}}const Qt=0,ut=Math.PI/4,Mt=2*ut,mn=3*ut,ae=4*ut,gn=5*ut,At=6*ut,ce=7*ut;function yn(c){const e=xn(c),{top:n,bottom:s,spaceWidth:r,strokeWidth:o,defaultKerning:i}=(e.get("0")??R.pickAny(e)).fontMetrics;return new pn(n,s,r,o,i,e)}function xn(c){const e=new Map;typeof c=="number"&&(c=new ve(c));const n=(h,f,p)=>{const m=new Ut(f,p,c);if(e.has(h))throw new Error(`duplicate letter: "${h}", previous letter: "${[...e].at(-1)[0]}"`);e.set(h,m)},{aWidth:s,digitWidth:r,capitalTop:o,capitalTopMiddle:i,capitalMiddle:a,capitalBottomMiddle:u,baseline:l,descender:w,strokeWidth:x}=c,d=0,y=x/3;{const h=c.mHeight,f=.5803571598560251*h,p=[];p.push(W.controlPoints(.5803571598560251*h,-.011904772996231272*h,.1993461912459357*h,-.4845653833822309*h,.15178572549774305*h,-.5833333559985097*h)),p.push(W.controlPoints(.15178572549774305*h,-.5833333559985097*h,.07142858010885174*h,-.7502096094253163*h,.07142858010885174*h,-.8809523915616125*h)),p.push(W.controlPoints(.07142858010885174*h,-.8809523915616125*h,.07142858010885174*h,-1*h,.18154763484090689*h,-1*h)),p.push(W.controlPoints(.18154763484090689*h,-1*h,.3125000278492327*h,-1*h,.3125000278492327*h,-.8809523857747589*h)),p.push(W.controlPoints(.3125000278492327*h,-.8809523857747589*h,.3125000278492327*h,-.795672021064033*h,.14880952935525849*h,-.5863095347804337*h)),p.push(W.controlPoints(.14880952935525849*h,-.5863095347804337*h,0*h,-.39598002063544424*h,0*h,-.23511904966855834*h)),p.push(W.controlPoints(0*h,-.23511904966855834*h,0*h,0*h,.16369048113341364*h,0*h)),p.push(W.controlPoints(.16369048113341364*h,0*h,.31699631330709954*h,0*h,.45535713019840074*h,-.4583333263408854*h)),n("&",new P(p),f)}{const h=r,f=h/2*Math.sqrt(3),p=(l+o)/2,m=p-h/2,g=m+h,M=0,v=f;n("<",new P([W.line4(v,m,M,p),W.line4(M,p,v,g)]),f),n(">",new P([W.line4(M,m,v,p),W.line4(v,p,M,g)]),f)}{const h=r*.9,f=h/2,p=h/2,m=p*Math.SQRT1_2,g=H.M(d,o+p);g.arc(f,o+p,f+m,o+p+m,"cw"),g.Q_angles(f,u,Mt),g.M(f,l-y),g.L(f,l),n("?",g.pathShape,h)}{const h=r*7/8,f=h/2,p=h,m=h/2,g=c.mHeight/8,M=o-g,v=l+g;if(v-M<m*4)throw new Error("wtf");const b=(M+v)/2,V=H.M(p,M).arc(p,M+m,f,M+m,"ccw").L(f,b-m).arc(d,b-m,d,b,"cw").arc(d,b+m,f,b+m,"cw").L(f,v-m).arc(p,v-m,p,v,"ccw").pathShape;n("{",V,h);const _=H.M(d,M).arc(d,M+m,f,M+m,"cw").L(f,b-m).arc(p,b-m,p,b,"ccw").arc(p,b+m,f,b+m,"ccw").L(f,v-m).arc(d,v-m,d,v,"cw").pathShape;n("}",_,h)}{const h=r,p=h/2,m=h;{const g=(w-l)*2,M=w,v=M-g,b=o-g/4,V=b+g;if(g<=0||M<=v||v<=V||V<=b)throw new Error("wtf");const _=r*.5;{const I=H.M(_,b).Q_HV(0,V).V(v).Q_VH(_,M).pathShape;n("(",I,_)}{const I=r*.5,C=H.M(0,b).Q_HV(I,V).V(v).Q_VH(0,M).pathShape;n(")",C,I)}{const I=H.M(_,b).H(0).V(M).H(_).pathShape;n("[",I,_)}{const I=H.M(0,b).H(_).V(M).H(0).pathShape;n("]",I,_)}}{const g=r*.4,M=r*.3,v=d,b=v+g,V=b+M,_=V+M,I=_+g,C=I,z=r*.25,T=a,F=T-z,O=T+z,j=H.M(v,T).Q_angles(b,F,Qt,ce).Q_angles(V,T,(Mt+ut)/2).Q_angles(_,O,Qt).Q_angles(I,T,ce).pathShape;n("~",j,C)}{const g=r*.75,M=g/2,v=H.M(M,a-M).V(a+M).M(d,a).H(g).pathShape;n("+",v,g)}{const g=r*.75,M=H.M(d,a).H(g).pathShape;n("-",M,g)}{const g=r*.75,M=2*x,v=g+M,b=a-v/2,V=b+v,_=b,I=b+g,C=(_+I)/2,z=0,T=g,F=g/2,O=new P([new q(z,C,T,C),new q(F,_,F,I),new q(z,V,T,V)]);n("±",O,g)}{const g=r*.75,M=0,v=g/2,b=g,V=2*x,_=a,I=new P([new q(M,_,b,_),new q(v,_-V-y,v,_-V),new q(v,_+V,v,_+V+y)]);H.M(M,a).H(g).pathShape,n("÷",I,g)}{const g=r*.75*Math.SQRT1_2,M=a-g/2,v=a+g/2,b=0,V=g,_=new P([new q(b,M,V,v),new q(V,M,b,v)]);n("×",_,g)}{const g=r/2*.9,M=5,v=-Math.PI/2,b=(o+l)/2,V=0,_=R.initializedArray(M,O=>{const j=O*(Math.PI*2)/M+v,it=R.polarToRectangular(V,j),at=R.polarToRectangular(g,j);return[it,at]}),I=_.flat(),C=Math.min(...I.map(({x:O})=>O));I.forEach(O=>{O.x-=C,O.y+=b});const z=_.map(([O,j])=>new q(O.x,O.y,j.x,j.y)),T=new P(z),F=Math.max(...I.map(({x:O})=>O));n("*",T,F)}{const g=r*.75,M=H.M(d,a-x*1.25).H(g).M(d,a+x*1.25).H(g).pathShape;n("=",M,g)}{const g=r*1.25,M=l+x,v=H.M(0,M).H(g).pathShape;n("_",v,g)}{const g=r/2,M=3*g,v=g/3,b=o,V=b+g,_=V+g,I=_+g,C=H.M(g+v,b).L(g-v,I).M(2*g+v,b).L(2*g-v,I).M(0,V).H(M).M(0,_).H(M).pathShape;n("#",C,M)}{const g=r/2,M=3*g,v=0,b=g,V=M/2,_=2*g,I=M,C=o+(c.mHeight-M)/2,z=C+b,T=C+V,F=C+_,O=C+I,j=H.M(_,T).Q_VH(V,z).Q_HV(b,T).Q_VH(V,F).Q_HV(_,T).Q_VH((_+I)/2,F).Q_HV(I,T).V((z+T)/2).Q_VH(V,C).Q_HV(v,T).Q_VH(V,O).H((_+I)/2).pathShape;n("@",j,M)}{const g=H.M(p,o).Q(m,o,m,i).L(m,u).Q(m,l,p,l).Q(d,l,d,u).L(d,i).Q(d,o,p,o).M(m,i).L(d,u).pathShape;n("0",g,h)}{const g=H.M(d,i).Q(p,i,p,o).L(p,l).M(d,l).L(m,l).pathShape;n("1",g,h)}{const g=H.M(d,i).Q_VH(p,o).Q_HV(m,i).Q_VH(p,a).Q_HV(d,l).L(m,l).pathShape;n("2",g,h)}{const g=H.M(d,i).Q_VH(p,o).Q_HV(m,i).Q_VH(p,a).Q_HV(m,u).Q_VH(p,l).Q_HV(d,u).pathShape;n("3",g,h)}{const g=(p+m)/2,M=(p+d)/2,v=H.M(m,a).L(d,a).L(M,o).M(g,o).L(g,l).pathShape;n("4",v,h)}{const g=d+r/5,M=m-r/5,v=(a+u)/2,b=H.M(M,o).L(g,o).L(d,a).Q_VH(p,i).Q_HV(m,v).Q_VH(p,l).Q_HV(d,u).pathShape;n("5",b,h)}{const g=H.M(m,o).Q_HV(d,u).Q_VH(p,l).Q_HV(m,u).Q_VH(p,a).Q_HV(d,u).pathShape;n("6",g,h)}{const g=H.M(d,o).L(m,o).L(d,l).pathShape;n("7",g,h)}{const g=H.M(p,o).Q(m,o,m,i).Q(m,a,p,a).Q(d,a,d,u).Q(d,l,p,l).Q(m,l,m,u).Q(m,a,p,a).Q(d,a,d,i).Q(d,o,p,o).pathShape;n("8",g,h)}{const g=H.M(m,i).Q(m,o,p,o).Q(d,o,d,i).Q(d,a,p,a).Q(m,a,m,i).Q(m,l,d,l).pathShape;n("9",g,h)}}{const h=H.M(d,l).L(s/2,o).L(c.aWidth,l).M(c.aWidth/4,a).L(c.aWidth*.75,a).pathShape;n("A",h,s)}{const h=r,f=i-o;if(f<=0)throw new Error("wtf");const p=(h-f)*(2/3),m=l-u;if(m<=0)throw new Error("wtf");const g=h-m,M=H.M(d,l).L(d,o).L(p,o).Q_HV(p+f,o+f).Q(p+f,a,p,a).L(d,a).M(Math.max(g,p),a).Q_HV(g+m,l-m).Q_VH(g,l).L(d,l).pathShape;n("B",M,h)}{const h=r,p=h/2,m=h,g=H.M(m,i).Q(m,o,p,o).Q(d,o,d,i).L(d,u).Q(d,l,p,l).Q(m,l,m,u).pathShape;n("C",g,h)}{const h=r,p=h/2,m=h,g=H.M(d,o).L(d,l).L(p,l).Q(m,l,m,u).L(m,i).Q(m,o,p,o).L(d,o).pathShape;n("D",g,h)}{const h=r,f=h*(2/3),p=h,m=H.M(p,o).L(d,o).L(d,l).L(p,l).M(f,a).L(d,a).pathShape;n("E",m,h)}{const h=r,f=h*(2/3),p=h,m=H.M(p,o).L(d,o).L(d,l).M(f,a).L(d,a).pathShape;n("F",m,h)}{const h=r,p=h/2,m=h,g=H.M(m,i).Q(m,o,p,o).Q(d,o,d,i).L(d,u).Q(d,l,p,l).Q(m,l,m,u).L(m,a).L(p,a).pathShape;n("G",g,h)}{const h=r,f=h,p=H.M(d,o).L(d,l).M(f,o).L(f,l).M(d,a).L(f,a).pathShape;n("H",p,h)}{const h=c.mHeight/3,f=h/2,p=h,m=H.M(d,o).L(p,o).M(d,l).L(p,l).M(f,o).L(f,l).pathShape;n("I",m,h)}{const h=r*.85,p=h/2,m=h,g=H.M(m,o).L(m,u).Q(m,l,p,l).Q(d,l,d,u).pathShape;n("J",g,h)}{const h=r+x,f=(o+l)/2,p=H.M(d,o).L(d,l).M(h,o).L(d+x,f).L(h,l).pathShape;n("K",p,h)}{const h=r,f=H.M(d,o).L(d,l).L(h,l).pathShape;n("L",f,h)}{const h=r*1.5,f=h/2,p=H.M(d,l).L(d,o).L(f,a).L(h,o).L(h,l).pathShape;n("M",p,h)}{const h=r*1.2,f=H.M(d,l).L(d,o).L(h,l).L(h,o).pathShape;n("N",f,h)}{const h=r*1.5,f=h/2,p=(o+l)/2,m=H.M(f,o).Q_HV(h,p).Q_VH(f,l).Q_HV(d,p).Q_VH(f,o).pathShape;n("O",m,h)}{const h=r,f=a-i;if(f<=0)throw new Error("wtf");const p=h-f,m=H.M(d,o).L(d,l).M(d,o).L(p,o).Q_HV(h,i).Q_VH(p,a).L(d,a).pathShape;n("P",m,h)}{const h=r*1.5,f=h/2,p=(o+l)/2,m=H.M(f,o).Q_HV(h,p).Q_VH(f,l).Q_HV(d,p).Q_VH(f,o).M(h-f*.75,l-f*.75).L(h+f/6,l+f/6).pathShape;n("Q",m,h)}{const h=r,f=a-i;if(f<=0)throw new Error("wtf");const p=h-f,m=H.M(d,o).L(d,l).M(d,o).L(p,o).Q_HV(h,i).Q_VH(p,a).L(d,a).M(p,a).L(h,l).pathShape;n("R",m,h)}{const h=r,f=r/2,p=r,m=H.M(p,i).Q_VH(f,o).Q_HV(d,i).Q_VH(f,a).Q_HV(p,u).Q_VH(f,l).Q_HV(d,u).pathShape;n("S",m,h)}{const f=r+x,p=f/2,m=f,g=c.mHeight/8,M=H.M(m,i).Q_VH(p,o).Q_HV(d,i).Q_VH(p,a).Q_HV(m,u).Q_VH(p,l).Q_HV(d,u).M(p,o-g).V(l+g).pathShape;n("$",M,f)}{const h=r,f=h/2,p=H.M(f,o).L(f,l).M(h,o).L(d,o).pathShape;n("T",p,h)}{const h=(u+a)/2,f=Math.abs(h-l)*.85,p=f*2,m=H.M(d,o).V(h).Q_VH(f,l).Q_HV(p,h).V(o).pathShape;n("U",m,p)}{const h=s,f=h/2,p=H.M(d,o).L(f,l).L(h,o).pathShape;n("V",p,h)}{const h=s*1.5,f=h/3,p=h/2,m=f*2,g=H.M(d,o).L(f,l).L(p,a).L(m,l).L(h,o).pathShape;n("W",g,h)}{const h=r,f=H.M(h,o).L(d,l).M(d,o).L(h,l).pathShape;n("X",f,h)}{const h=x,f=r+h,p=H.M(f,o).L(h,l).M(d,o).L(f/2,a).pathShape;n("Y",p,f)}{const h=r,f=H.M(d,o).H(h).L(d,l).H(h).pathShape;n("Z",f,h)}{const h=r/4,f=r*1.2,p=H.M(h*2,o+h).Q_VH(h,o).Q_HV(0,o+h).Q_VH(h,o+h*2).Q_HV(h*2,o+h),g=p.pathShape.translate(f-h*2,c.mHeight-h*2);p.addCommands(g.commands),p.M(f,o).L(d,l);const M=p.pathShape;n("%",M,f)}{const h=r,f=H.M(h,o).L(d,l).pathShape;n("/",f,h)}{const h=r,f=H.M(d,o).L(h,l).pathShape;n("\\",f,h)}{const h=r,f=h*.05,p=h+f,m=h/2,g=H.M(h,u).Q_VH(m,a).Q_HV(d,u).Q_VH(m,l).Q_HV(p,a).V(l).pathShape;n("a",g,p)}{const h=r,f=h*.05,p=h+f,m=f,g=f+h/2,M=p,v=H.M(m,u).Q_VH(g,l).Q_HV(M,u).Q_VH(g,a).Q_HV(d,l).V(o).pathShape;n("b",v,p)}{const h=r*.875,f=0,p=r/2,m=h,g=(a+u)/2,M=(u+l)/2,v=H.M(m,g).Q_VH(p,a).Q_HV(f,u).Q_VH(p,l).Q_HV(m,M).pathShape;n("c",v,h)}{const h=r,f=h*.05,p=h+f,m=h/2,g=H.M(p,o).L(p,l).Q_VH(m,a).Q_HV(d,u).Q_VH(m,l).Q_HV(h,u).pathShape;n("d",g,p)}const S=r/8;{const h=r,f=r/2,p=h,m=p-S,g=H.M(d,u).H(p).Q_VH(f,a).Q_HV(d,u).Q_VH(f,l).H(m).pathShape;n("e",g,h)}{const h=r*.75,f=h/2,p=h,m=H.M(p,o).Q_HV(f,i).V(l).M(p,a).H(d).pathShape;n("f",m,h)}{const h=r,f=h*.05,p=h+f,m=h/2,g=H.M(h,u).Q_VH(m,a).Q_HV(d,u).Q_VH(m,l).Q_HV(p,a).V(l).Q_VH(m,w).H(d+S).pathShape;n("g",g,p)}{const h=r*.85,f=h/2,p=H.M(d,o).V(l).Q_VH(f,a).Q_HV(h,u).V(l).pathShape;n("h",p,h)}{const f=H.M(d,a).V(l).M(d,i).V(i-y).pathShape;n("i",f,0)}{const h=Math.abs(l-w),f=h/2,p=H.M(h,a).V(l).Q_VH(f,w).Q_HV(d,l).M(h,i).V(i-y).pathShape;n("j",p,h)}{const f=H.M(d,l).V(l-y).pathShape;n(".",f,0)}{const f=H.M(d,o).V(u).M(d,l).V(l-y).pathShape;n("!",f,0)}{const f=(w-l)/2,p=f/2,m=H.M(d,l-y).V(l).Q_VH(-p,l+f).pathShape;n(",",m,0)}{const p=(w-l)/2+y,m=new P([new q(d,o,d,o+p)]);n("'",m,0)}{const f=(w-l)/2+y,p=f,m=f,g=new P([new q(d,o,m,o+f)]);n("`",g,p)}{const f=(w-l)/2+y,p=f,m=f*2,g=m,M=o,v=o+f,b=H.M(d,v).L(p,M).L(g,v).pathShape;n("^",b,m)}{const h=x*2,p=(w-l)/2+y,m=new P([new q(d,o,d,o+p),new q(h,o,h,o+p)]);n('"',m,h)}{const f=a,p=H.M(d,l).V(l-y).M(d,f-y).V(f).pathShape;n(":",p,0)}{const f=new P([new q(d,o,d,l)]);n("|",f,0)}{const f=a,p=(w-l)/2,m=p/2,g=H.M(d,l-y).V(l).Q_VH(-m,l+p).M(d,f-y).V(f).pathShape;n(";",g,0)}{const h=c.xHeight*2/3,f=r/10,p=h+f,m=H.M(d,o).V(l).M(h,a).L(d,a+h).M(h/2,l-h).L(p,l).pathShape;n("k",m,p)}{const f=H.M(d,o).V(l).pathShape;n("l",f,0)}{const h=r*1.5,f=h/4,p=h/2,m=h*3/4,g=h,M=H.M(d,a).V(l).Q_VH(f,a).Q_HV(p,u).V(l).M(p,u).Q_VH(m,a).Q_HV(g,u).V(l).pathShape;n("m",M,h)}{const h=r*.85,f=h/2,p=H.M(d,a).V(l).Q_VH(f,a).Q_HV(h,u).V(l).pathShape;n("n",p,h)}{const h=r,f=0,p=h/2,m=h,g=H.M(p,a).Q_HV(m,u).Q_VH(p,l).Q_HV(f,u).Q_VH(p,a).pathShape;n("o",g,h)}{const h=r,f=r*.05,p=h+f,m=f,g=f+h/2,M=p,v=H.M(m,u).Q_VH(g,a).Q_HV(M,u).Q_VH(g,l).Q_HV(d,a).V(w).pathShape;n("p",v,p)}{const h=r,f=h/2,p=r*.05,m=h+p,g=Math.abs(l-w),M=m+g/2,v=m+g,b=H.M(h,u).Q_VH(f,a).Q_HV(d,u).Q_VH(f,l).Q_HV(m,a).V(l).Q_VH(M,w).Q_HV(v,(l+w*2)/3).pathShape;n("q",b,v*.667)}{const h=r,f=h/2,p=H.M(d,a).V(l).Q_VH(f,a).Q_HV(h,u).pathShape;n("r",p,h)}{const h=c.xHeight*2/3,f=h/2,p=l,m=u,g=a,M=(p+m)/2,v=(m+g)/2,b=(v+g)/2,V=(p+M)/2,_=H.M(h,b).Q_VH(f,g).Q_HV(d,v).Q_VH(f,m).Q_HV(h,M).Q_VH(f,p).Q_HV(d,V).pathShape;n("s",_,h)}{const h=r*.75,f=h/2,p=h,m=H.M(f,i).V(u).Q_VH(p,l).M(p,a).H(d).pathShape;n("t",m,h)}{const h=r*.85,f=h/2,p=H.M(d,a).V(u).Q_VH(f,l).Q_HV(h,a).L(h,l).pathShape;n("u",p,h)}{const h=r,f=h/2,p=H.M(d,a).L(f,l).L(h,a).pathShape;n("v",p,h)}{const h=c.xHeight*1.5,f=h/3,p=h/2,m=f*2,g=H.M(d,a).L(f,l).L(p,u).L(m,l).L(h,a).pathShape;n("w",g,h)}{const h=r,f=H.M(h,a).L(d,l).M(d,a).L(h,l).pathShape;n("x",f,h)}{const h=r,f=h/2,p=(a+w)/2,m=H.M(h,a).L(d,w).M(d,a).L(f,p).pathShape;n("y",m,h)}{const h=r,f=H.M(d,a).H(h).L(d,l).H(h).pathShape;n("z",f,h)}{const h=r/2,f=h/2,p=H.M(f,o).circle(f,o+f,"cw").pathShape;n("°",p,h)}{const h=-o,f=h/2,p=H.M(f,o).circle(f,o+f,"cw").pathShape;n("◯",p,h)}{const h=-o,f=h/2,p=o/2,m=H.M(0,p).arc(f,p,h,p,"cw").pathShape;n("◠",m,h)}{const h=-o,f=h/2,p=o/2,m=H.M(0,p).arc(f,p,h,p,"ccw").pathShape;n("◡",m,h)}{const h=-o,f=h/4,p=o+f,m=H.M(f*2,p).arc(f*3,p,h,p,"cw").Q_angles(f*2,l,mn,Mt).Q_angles(0,p,At,gn).arc(f,p,f*2,p,"cw").pathShape;n("♡",m,h)}{const h=c.mHeight,f=h/4,p=f;{const m=h,g=(o+l)/2,M=H.M(p,g-f).L(0,g).L(p,g+f).M(0,g).L(m,g).M(m-p,g-f).L(m,g).L(m-p,g+f);n("↔",M.pathShape,m);const v=new P(M.commands.slice(0,3));n("←",v,m);const b=new P(M.commands.slice(2,5));n("→",b,m)}{const g=f,M=f*2,v=M,b=H.M(0,o+p).L(g,o).L(v,o+p).M(g,o).L(g,l).M(0,l-p).L(g,l).L(v,l-p);n("↕",b.pathShape,M);const V=new P(b.commands.slice(0,3));n("↑",V,M);const _=new P(b.commands.slice(2,5));n("↓",_,M)}}{const h=c.mHeight,f=0,p=h/2,m=h,g=o,M=l,v=(g+M)/2,b=Math.PI/16,V=H.M(p,g).Q_angles(m,v,Qt+b,Mt-b).Q_angles(p,M,Mt+b,ae-b).Q_angles(f,v,ae+b,At-b).Q_angles(p,g,At+b,Qt-b).pathShape;n("✧",V,h)}{let h=function(_,I){const C=_.maxY-_.minY,T=(I.bottom-I.top)/C,O=(_.maxX-_.minX)*T,j=0,it=O,at=R.makeBoundedLinear(_.minX,j,_.maxX,it),mt=R.makeBoundedLinear(_.minY,I.top,_.maxY,I.bottom);return{x:at,y:mt,advance:it}},f=function(){const _={x:1/0,y:1/0},I={x:-1/0,y:-1/0};M.forEach(F=>{["x","y"].forEach(O=>{_[O]=Math.min(_[O],F[O]),I[O]=Math.max(I[O],F[O])})});const C={minX:_.x,maxX:I.x,minY:_.y,maxY:I.y},T=h(C,{top:o,bottom:l});return M.forEach(F=>{F.x=T.x(F.x),F.y=T.y(F.y)}),T};const g=At,M=R.initializedArray(5,_=>{const I=g+_*(2*Math.PI)*2/5;return R.polarToRectangular(1,I)}),v=f(),b=M.map((_,I,C)=>{const z=C.at(I+1-C.length);return new q(_.x,_.y,z.x,z.y)});n("☆",new P(b),v.advance);const V=M.map((_,I,C)=>{const z=C.at(I+1-C.length),T=Math.atan2(z.y-_.y,z.x-_.x),F=.175;return W.angles(_.x,_.y,T+F,z.x,z.y,T-F)});n("⭒",new P(V),v.advance)}return new Map([...e.entries()].sort(([h],[f])=>h<f?-1:h==f?1:0))}class ve{constructor(e,n=e/10){if(this.fontSize=e,this.strokeWidth=n,e<=0||!isFinite(e))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class wn{constructor(e,n,s){this.delayMS=e,this.cumulative=n,this.action=s,this.request=this.request.bind(this)}#t=!1;#e=NaN;#n(){const e=isNaN(this.#e)?this.delayMS:this.delayMS-(performance.now()-this.#e);this.#t=!0,this.#e=NaN,setTimeout(()=>{isFinite(this.#e)?this.#n():(this.#t=!1,this.action())},e)}request(){this.#t?this.cumulative&&(this.#e=performance.now()):this.#n()}}const et=Y.getById("preview",HTMLCanvasElement),lt=R.assertNonNullable(et.getContext("2d"));let pt={totalLength:0,drawTo(c,e){}};function*Me(c){for(let e=0;e<c;e++){const n=e/(c-1);lt.clearRect(0,0,lt.canvas.width,lt.canvas.height),pt.drawTo(n*pt.totalLength,lt);const s=R.makePromise();et.toBlob(r=>{r?s.resolve(r):s.reject(new Error("failed"))}),yield s.promise}}async function vn(){document.body.insertAdjacentHTML("beforeend","<h2>Frames</h2>");for await(const c of Me(10)){const e=URL.createObjectURL(c),n=document.createElement("img");n.classList.add("show-images"),n.src=e,document.body.append(n)}}window.showImages=vn;const Mn=async c=>{c.on("log",({message:e})=>console.log("FFmpeg log:",e)),c.on("progress",({progress:e})=>console.log("Load progress:",e));try{await c.load({coreURL:Ve,wasmURL:$e}),console.log("FFmpeg loaded successfully")}catch(e){throw console.error("FFmpeg load failed:",e),e}};async function En(){const c=new Ae;await Mn(c);const e=R.assertNonNullable(R.parseFloatX(Dt.value)),n=Math.round(e/1e3*30);for(const[l,w]of R.zip(Me(n),R.count())){const d=`frame${(w+1).toString().padStart(2,"0")}.png`;c.writeFile(d,new Uint8Array(await(await l).arrayBuffer()))}const s=await c.exec(["-framerate","30","-i","frame%02d.png","-c:v","prores_ks","-pix_fmt","yuva444p10le","-y","output.mov"]);if(s!==0)throw new Error(`ffmpeg exec problem: ${s}`);const r=await c.readFile("output.mov"),o=typeof r=="string"?r:R.assertClass(r.buffer,ArrayBuffer),i=new Blob([o],{type:"video/quicktime"}),a=URL.createObjectURL(i),u=document.createElement("a");u.href=a,u.download="output.mov",u.click(),URL.revokeObjectURL(a)}const Ft=Y.getById("createVideo",HTMLButtonElement);Ft.addEventListener("click",En);const Nt=Y.getById("fontSize",HTMLInputElement),qt=Y.getById("text",HTMLTextAreaElement),Ee=Y.getById("strokeColor",HTMLInputElement),Vt=Y.getById("lineWidth",HTMLInputElement),Dt=Y.getById("duration",HTMLInputElement),Le=Y.getById("recommendedLineWidth",HTMLButtonElement),Wt=Y.getById("backgroundColor",HTMLInputElement);class Xt{static#t=[Nt,qt,Ee,Vt,Wt];static#e=["alignment","fontFamily"];static read(){const e=new URLSearchParams(location.hash.substring(1));this.#t.forEach(n=>{const s=e.get(n.id);typeof s=="string"&&(n.value=s)}),this.#e.forEach(n=>{const s=e.get(n);if(typeof s=="string"){const r=Y.selectorQueryAll(`input[type="radio"][name="${n}"][value="${s}"]`,HTMLInputElement);r.length!=1?console.warn("Expecting 1 radio button",r,n,s):r[0].checked=!0}})}static#n(){const e=new URLSearchParams;this.#t.forEach(n=>{e.append(n.id,n.value)}),this.#e.forEach(n=>{const s=Y.selectorQuery(`input[type="radio"][name="${n}"]:checked`,HTMLInputElement).value;e.append(n,s)}),location.replace("#"+e.toString())}static writeSoon=new wn(50,!0,()=>this.#n()).request;static init(){this.#t.forEach(e=>{e.addEventListener("input",this.writeSoon),Y.selectorQueryAll('input[type="radio"]',HTMLInputElement).forEach(n=>n.addEventListener("input",this.writeSoon))})}}Xt.init();let $t=NaN;Le.addEventListener("click",()=>{Number.isFinite($t)&&(Vt.value=$t.toString(),Rt(),Xt.writeSoon())});const he=Y.getById("error",HTMLDivElement),Ln=Y.getById("length",HTMLSpanElement),Sn=Y.getById("progress",HTMLInputElement);function Rt(){try{he.style.display="none";const c=R.parseFloatX(Nt.value),e=R.parseFloatX(Vt.value),n=R.parseFloatX(Dt.value);if([[c,Nt],[e,Vt],[n,Dt]].forEach(([l,w])=>{w.style.backgroundColor=l===void 0?"pink":""}),c===void 0||e===void 0||n===void 0){Ft.disabled=!0;return}Ft.disabled=!1,$t=c/10,Le.innerText=`Recommended: ${$t}px`;const s=yn(new ve(c,e)),r=new Ie(s);r.addText(qt.value);const o=Y.selectorQuery('input[type="radio"][name="alignment"]:checked',HTMLInputElement).value,i=c*25,a=r.align(i,o),u=(s.bottom-s.top)/2;et.width=i+2*u,et.height=(a.allRowMetrics.at(-1)?.bottom??0)+2*u,et.style.width=`${et.width/devicePixelRatio}px`,et.style.height=`${et.height/devicePixelRatio}px`,lt.strokeStyle=Ee.value,lt.lineWidth=e,pt=a.drawPartial(u,u),Ln.innerText=pt.totalLength.toString(),pt.drawTo(Sn.valueAsNumber*pt.totalLength,lt)}catch(c){he.style.display="",console.error(c)}}Xt.read();Rt();[qt,...Y.selectorQueryAll("input",HTMLInputElement)].forEach(c=>{c.addEventListener("input",Rt)});window.updateSample=Rt;function Se(c=Wt.value,e=10){const n=`color-mix(in srgb-linear, ${c} ${100-e}%, white ${e}%)`,s=`color-mix(in srgb-linear, ${c} ${100-e}%, black ${e}%)`,r=document.createElement("canvas");r.width=2,r.height=2;const o=r.getContext("2d");o.fillStyle=n,o.fillRect(0,0,2,2),o.fillStyle=s,o.fillRect(0,1,1,1),o.fillRect(1,0,1,1);const i=r.toDataURL("image/png");et.style.background=`url(${i}) repeat`,et.style.backgroundSize="20px 20px",et.style.imageRendering="pixelated"}Se();Wt.addEventListener("input",()=>Se());
